import{a as o,j as e,d as Ce,e as Ee}from"./index-xWq--A2X.js";import{u as we,S as Re,a as Le}from"./SiteInputPanel-DG0rS2qH.js";import{q as U,t as J,v as De,w as _e,x as me,y as Q,z as ee,A as pe,D as Me,E as ue,F as ae,G as Oe,H as Te,I as Ke,r as he,J as Fe,K as fe,M as We,S as ze,N as Ge,O as Be,Q as ve,U as Ve,V as Xe,W as Ye,Z as He,_ as $e,f as Ue,$ as qe,h as Ze,a0 as Je,a1 as Qe,j as Y,a2 as ea,o as te,a3 as ie,i as T,a4 as aa,a5 as ta,a6 as ia,a7 as M,a8 as sa,a9 as na,aa as ra,ab as la,m as xe,ac as oa,ad as q,ae as H,af as ca,ag as da,ah as ma,R as K,B as se,C as F,X as W,Y as z,T as G,a as ne,L as B}from"./BarChart-EjlzIuVD.js";import{g as pa,A as re,D as ua,L as ha,a as le}from"./LineChart-C7fzaJEm.js";import"./with-selector-BP08vSA0.js";var ye=(t,a,i)=>me(t,"xAxis",Q(t,a),i),be=(t,a,i)=>pe(t,"xAxis",Q(t,a),i),ge=(t,a,i)=>me(t,"yAxis",ee(t,a),i),je=(t,a,i)=>pe(t,"yAxis",ee(t,a),i),fa=U([J,ye,ge,be,je],(t,a,i,s,n)=>ue(t,"xAxis")?ae(a,s,!1):ae(i,n,!1)),va=(t,a)=>a,Se=U([Oe,va],(t,a)=>t.filter(i=>i.type==="area").find(i=>i.id===a)),Ie=t=>{var a=J(t),i=ue(a,"xAxis");return i?"yAxis":"xAxis"},xa=(t,a)=>{var i=Ie(t);return i==="yAxis"?ee(t,a):Q(t,a)},ya=(t,a,i)=>Te(t,Ie(t),xa(t,a),i),ba=U([Se,ya],(t,a)=>{var i;if(!(t==null||a==null)){var{stackId:s}=t,n=Me(t);if(!(s==null||n==null)){var l=(i=a[s])===null||i===void 0?void 0:i.stackedData,d=l?.find(r=>r.key===n);if(d!=null)return d.map(r=>[r[0],r[1]])}}}),ga=U([J,ye,ge,be,je,ba,De,fa,Se,_e],(t,a,i,s,n,l,d,r,m,f)=>{var{chartData:u,dataStartIndex:x,dataEndIndex:y}=d;if(!(m==null||t!=="horizontal"&&t!=="vertical"||a==null||i==null||s==null||n==null||s.length===0||n.length===0||r==null)){var{data:v}=m,p;if(v&&v.length>0?p=v:p=u?.slice(x,y+1),p!=null)return Fa({layout:t,xAxis:a,yAxis:i,xAxisTicks:s,yAxisTicks:n,dataStartIndex:x,areaSettings:m,stackedData:l,displayedData:p,chartBaseValue:f,bandSize:r})}}),ja=["id"],Sa=["activeDot","animationBegin","animationDuration","animationEasing","connectNulls","dot","fill","fillOpacity","hide","isAnimationActive","legendType","stroke","xAxisId","yAxisId"];function _(){return _=Object.assign?Object.assign.bind():function(t){for(var a=1;a<arguments.length;a++){var i=arguments[a];for(var s in i)({}).hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},_.apply(null,arguments)}function Ne(t,a){if(t==null)return{};var i,s,n=Ia(t,a);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(s=0;s<l.length;s++)i=l[s],a.indexOf(i)===-1&&{}.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function Ia(t,a){if(t==null)return{};var i={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(a.indexOf(s)!==-1)continue;i[s]=t[s]}return i}function oe(t,a){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);a&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),i.push.apply(i,s)}return i}function O(t){for(var a=1;a<arguments.length;a++){var i=arguments[a]!=null?arguments[a]:{};a%2?oe(Object(i),!0).forEach(function(s){Na(t,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):oe(Object(i)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(i,s))})}return t}function Na(t,a,i){return(a=Aa(a))in t?Object.defineProperty(t,a,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[a]=i,t}function Aa(t){var a=ka(t,"string");return typeof a=="symbol"?a:a+""}function ka(t,a){if(typeof t!="object"||!t)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var s=i.call(t,a);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(t)}function $(t,a){return t&&t!=="none"?t:a}var Pa=t=>{var{dataKey:a,name:i,stroke:s,fill:n,legendType:l,hide:d}=t;return[{inactive:d,dataKey:a,type:l,color:$(s,n),value:ve(i,a),payload:t}]},Ca=o.memo(t=>{var{dataKey:a,data:i,stroke:s,strokeWidth:n,fill:l,name:d,hide:r,unit:m,tooltipType:f,id:u}=t,x={dataDefinedOnItem:i,getPosition:Xe,settings:{stroke:s,strokeWidth:n,fill:l,dataKey:a,nameKey:void 0,name:ve(d,a),hide:r,type:f,color:$(s,l),unit:m,graphicalItemId:u}};return o.createElement(Ve,{tooltipEntrySettings:x})});function Ea(t){var{clipPathId:a,points:i,props:s}=t,{needClip:n,dot:l,dataKey:d}=s,r=xe(s);return o.createElement(ua,{points:i,dot:l,className:"recharts-area-dots",dotClassName:"recharts-area-dot",dataKey:d,baseProps:r,needClip:n,clipPathId:a})}function wa(t){var{showLabels:a,children:i,points:s}=t,n=s.map(l=>{var d,r,m={x:(d=l.x)!==null&&d!==void 0?d:0,y:(r=l.y)!==null&&r!==void 0?r:0,width:0,lowerWidth:0,upperWidth:0,height:0};return O(O({},m),{},{value:l.value,payload:l.payload,parentViewBox:void 0,viewBox:m,fill:void 0})});return o.createElement(la,{value:a?n:void 0},i)}function ce(t){var{points:a,baseLine:i,needClip:s,clipPathId:n,props:l}=t,{layout:d,type:r,stroke:m,connectNulls:f,isRange:u}=l,{id:x}=l,y=Ne(l,ja),v=xe(y),p=oa(y);return o.createElement(o.Fragment,null,a?.length>1&&o.createElement(Y,{clipPath:s?"url(#clipPath-".concat(n,")"):void 0},o.createElement(q,_({},p,{id:x,points:a,connectNulls:f,type:r,baseLine:i,layout:d,stroke:"none",className:"recharts-area-area"})),m!=="none"&&o.createElement(q,_({},v,{className:"recharts-area-curve",layout:d,type:r,connectNulls:f,fill:"none",points:a})),m!=="none"&&u&&o.createElement(q,_({},v,{className:"recharts-area-curve",layout:d,type:r,connectNulls:f,fill:"none",points:i}))),o.createElement(Ea,{points:a,props:y,clipPathId:n}))}function Ra(t){var a,i,{alpha:s,baseLine:n,points:l,strokeWidth:d}=t,r=(a=l[0])===null||a===void 0?void 0:a.y,m=(i=l[l.length-1])===null||i===void 0?void 0:i.y;if(!H(r)||!H(m))return null;var f=s*Math.abs(r-m),u=Math.max(...l.map(x=>x.x||0));return T(n)?u=Math.max(n,u):n&&Array.isArray(n)&&n.length&&(u=Math.max(...n.map(x=>x.x||0),u)),T(u)?o.createElement("rect",{x:0,y:r<m?r:r-f,width:u+(d?parseInt("".concat(d),10):1),height:Math.floor(f)}):null}function La(t){var a,i,{alpha:s,baseLine:n,points:l,strokeWidth:d}=t,r=(a=l[0])===null||a===void 0?void 0:a.x,m=(i=l[l.length-1])===null||i===void 0?void 0:i.x;if(!H(r)||!H(m))return null;var f=s*Math.abs(r-m),u=Math.max(...l.map(x=>x.y||0));return T(n)?u=Math.max(n,u):n&&Array.isArray(n)&&n.length&&(u=Math.max(...n.map(x=>x.y||0),u)),T(u)?o.createElement("rect",{x:r<m?r:r-f,y:0,width:f,height:Math.floor(u+(d?parseInt("".concat(d),10):1))}):null}function Da(t){var{alpha:a,layout:i,points:s,baseLine:n,strokeWidth:l}=t;return i==="vertical"?o.createElement(Ra,{alpha:a,points:s,baseLine:n,strokeWidth:l}):o.createElement(La,{alpha:a,points:s,baseLine:n,strokeWidth:l})}function _a(t){var{needClip:a,clipPathId:i,props:s,previousPointsRef:n,previousBaselineRef:l}=t,{points:d,baseLine:r,isAnimationActive:m,animationBegin:f,animationDuration:u,animationEasing:x,onAnimationStart:y,onAnimationEnd:v}=s,p=o.useMemo(()=>({points:d,baseLine:r}),[d,r]),A=aa(p,"recharts-area-"),g=ta(),[k,P]=o.useState(!1),S=!k,h=o.useCallback(()=>{typeof v=="function"&&v(),P(!1)},[v]),j=o.useCallback(()=>{typeof y=="function"&&y(),P(!0)},[y]);if(g==null)return null;var c=n.current,N=l.current;return o.createElement(wa,{showLabels:S,points:d},s.children,o.createElement(ia,{animationId:A,begin:f,duration:u,isActive:m,easing:x,onAnimationEnd:h,onAnimationStart:j,key:A},b=>{if(c){var C=c.length/d.length,R=b===1?d:d.map((I,w)=>{var L=Math.floor(w*C);if(c[L]){var D=c[L];return O(O({},I),{},{x:M(D.x,I.x,b),y:M(D.y,I.y,b)})}return I}),E;return T(r)?E=M(N,r,b):sa(r)||na(r)?E=M(N,0,b):E=r.map((I,w)=>{var L=Math.floor(w*C);if(Array.isArray(N)&&N[L]){var D=N[L];return O(O({},I),{},{x:M(D.x,I.x,b),y:M(D.y,I.y,b)})}return I}),b>0&&(n.current=R,l.current=E),o.createElement(ce,{points:R,baseLine:E,needClip:a,clipPathId:i,props:s})}return b>0&&(n.current=d,l.current=r),o.createElement(Y,null,m&&o.createElement("defs",null,o.createElement("clipPath",{id:"animationClipPath-".concat(i)},o.createElement(Da,{alpha:b,points:d,baseLine:r,layout:g,strokeWidth:s.strokeWidth}))),o.createElement(Y,{clipPath:"url(#animationClipPath-".concat(i,")")},o.createElement(ce,{points:d,baseLine:r,needClip:a,clipPathId:i,props:s})))}),o.createElement(ra,{label:s.label}))}function Ma(t){var{needClip:a,clipPathId:i,props:s}=t,n=o.useRef(null),l=o.useRef();return o.createElement(_a,{needClip:a,clipPathId:i,props:s,previousPointsRef:n,previousBaselineRef:l})}class Oa extends o.PureComponent{render(){var{hide:a,dot:i,points:s,className:n,top:l,left:d,needClip:r,xAxisId:m,yAxisId:f,width:u,height:x,id:y,baseLine:v,zIndex:p}=this.props;if(a)return null;var A=Ze("recharts-area",n),g=y,{r:k,strokeWidth:P}=pa(i),S=Je(i),h=k*2+P,j=r?"url(#clipPath-".concat(S?"":"dots-").concat(g,")"):void 0;return o.createElement(Qe,{zIndex:p},o.createElement(Y,{className:A},r&&o.createElement("defs",null,o.createElement(ea,{clipPathId:g,xAxisId:m,yAxisId:f}),!S&&o.createElement("clipPath",{id:"clipPath-dots-".concat(g)},o.createElement("rect",{x:d-h/2,y:l-h/2,width:u+h,height:x+h}))),o.createElement(Ma,{needClip:r,clipPathId:g,props:this.props})),o.createElement(re,{points:s,mainColor:$(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot,clipPath:j}),this.props.isRange&&Array.isArray(v)&&o.createElement(re,{points:v,mainColor:$(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot,clipPath:j}))}}var Ae={activeDot:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!1,fill:"#3182bd",fillOpacity:.6,hide:!1,isAnimationActive:"auto",legendType:"line",stroke:"#3182bd",strokeWidth:1,type:"linear",label:!1,xAxisId:0,yAxisId:0,zIndex:Fe.area};function Ta(t){var a,i=he(t,Ae),{activeDot:s,animationBegin:n,animationDuration:l,animationEasing:d,connectNulls:r,dot:m,fill:f,fillOpacity:u,hide:x,isAnimationActive:y,legendType:v,stroke:p,xAxisId:A,yAxisId:g}=i,k=Ne(i,Sa),P=Ye(),S=He(),{needClip:h}=$e(A,g),j=fe(),{points:c,isRange:N,baseLine:b}=(a=Ue(L=>ga(L,t.id,j)))!==null&&a!==void 0?a:{},C=qe();if(P!=="horizontal"&&P!=="vertical"||C==null||S!=="AreaChart"&&S!=="ComposedChart")return null;var{height:R,width:E,x:I,y:w}=C;return!c||!c.length?null:o.createElement(Oa,_({},k,{activeDot:s,animationBegin:n,animationDuration:l,animationEasing:d,baseLine:b,connectNulls:r,dot:m,fill:f,fillOpacity:u,height:R,hide:x,layout:P,isAnimationActive:y==="auto"?!ca.isSsr:y,isRange:N,legendType:v,needClip:h,points:c,stroke:p,width:E,left:I,top:w,xAxisId:A,yAxisId:g}))}var Ka=(t,a,i,s,n)=>{var l=i??a;if(T(l))return l;var d=t==="horizontal"?n:s,r=d.scale.domain();if(d.type==="number"){var m=Math.max(r[0],r[1]),f=Math.min(r[0],r[1]);return l==="dataMin"?f:l==="dataMax"||m<0?m:Math.max(Math.min(r[0],r[1]),0)}return l==="dataMin"?r[0]:l==="dataMax"?r[1]:r[0]};function Fa(t){var{areaSettings:{connectNulls:a,baseValue:i,dataKey:s},stackedData:n,layout:l,chartBaseValue:d,xAxis:r,yAxis:m,displayedData:f,dataStartIndex:u,xAxisTicks:x,yAxisTicks:y,bandSize:v}=t,p=n&&n.length,A=Ka(l,d,i,r,m),g=l==="horizontal",k=!1,P=f.map((h,j)=>{var c,N,b,C;if(p)C=n[u+j];else{var R=te(h,s);Array.isArray(R)?(C=R,k=!0):C=[A,R]}var E=(c=(N=C)===null||N===void 0?void 0:N[1])!==null&&c!==void 0?c:null,I=E==null||p&&!a&&te(h,s)==null;if(g){var w;return{x:ie({axis:r,ticks:x,bandSize:v,entry:h,index:j}),y:I?null:(w=m.scale.map(E))!==null&&w!==void 0?w:null,value:C,payload:h}}return{x:I?null:(b=r.scale.map(E))!==null&&b!==void 0?b:null,y:ie({axis:m,ticks:y,bandSize:v,entry:h,index:j}),value:C,payload:h}}),S;return p||k?S=P.map(h=>{var j,c=Array.isArray(h.value)?h.value[0]:null;if(g){var N;return{x:h.x,y:c!=null&&h.y!=null&&(N=m.scale.map(c))!==null&&N!==void 0?N:null,payload:h.payload}}return{x:c!=null&&(j=r.scale.map(c))!==null&&j!==void 0?j:null,y:h.y,payload:h.payload}}):S=g?m.scale.map(A):r.scale.map(A),{points:P,baseLine:S??0,isRange:k}}function Wa(t){var a=he(t,Ae),i=fe();return o.createElement(We,{id:a.id,type:"area"},s=>o.createElement(o.Fragment,null,o.createElement(ze,{legendPayload:Pa(a)}),o.createElement(Ca,{dataKey:a.dataKey,data:a.data,stroke:a.stroke,strokeWidth:a.strokeWidth,fill:a.fill,name:a.name,hide:a.hide,unit:a.unit,tooltipType:a.tooltipType,id:s}),o.createElement(Ge,{type:"area",id:s,data:a.data,dataKey:a.dataKey,xAxisId:a.xAxisId,yAxisId:a.yAxisId,zAxisId:0,stackId:Be(a.stackId),hide:a.hide,barSize:void 0,baseValue:a.baseValue,isPanorama:i,connectNulls:a.connectNulls}),o.createElement(Ta,_({},a,{id:s}))))}var V=o.memo(Wa,Ke);V.displayName="Area";var za=["axis"],Ga=o.forwardRef((t,a)=>o.createElement(da,{chartName:"AreaChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:za,tooltipPayloadSearcher:ma,categoricalChartProps:t,ref:a}));const X={sand:{label:"Sand",Ks:117.8,psi:49.5,theta_e:.437,theta_i:.1},loamySand:{label:"Loamy Sand",Ks:29.9,psi:61.3,theta_e:.437,theta_i:.12},sandyLoam:{label:"Sandy Loam",Ks:10.9,psi:110.1,theta_e:.453,theta_i:.15},loam:{label:"Loam",Ks:3.4,psi:88.9,theta_e:.463,theta_i:.2},siltLoam:{label:"Silt Loam",Ks:6.5,psi:166.8,theta_e:.501,theta_i:.22},sandyClayLoam:{label:"Sandy Clay Loam",Ks:1.5,psi:218.5,theta_e:.398,theta_i:.2},clayLoam:{label:"Clay Loam",Ks:1,psi:208.8,theta_e:.464,theta_i:.25},siltyClayLoam:{label:"Silty Clay Loam",Ks:1,psi:273,theta_e:.471,theta_i:.25},clay:{label:"Clay (Glacial Till)",Ks:.3,psi:316.3,theta_e:.475,theta_i:.3}},Z=[[0,0],[.042,.01],[.083,.022],[.125,.035],[.167,.048],[.208,.063],[.25,.08],[.292,.098],[.333,.12],[.375,.147],[.417,.181],[.438,.204],[.458,.235],[.479,.283],[.489,.357],[.5,.663],[.521,.735],[.542,.772],[.563,.799],[.583,.82],[.625,.85],[.667,.88],[.708,.916],[.75,.936],[.833,.952],[.917,.976],[1,1]],Ba=[2,5,10,25,50,100],Va={2:{5:82,10:56,15:45,30:30,60:18,120:11,360:5,720:3,1440:1.7},5:{5:110,10:76,15:61,30:41,60:25,120:15,360:6.8,720:4,1440:2.3},10:{5:128,10:89,15:72,30:48,60:29,120:18,360:8,720:4.7,1440:2.7},25:{5:153,10:107,15:86,30:58,60:35,120:21,360:9.6,720:5.6,1440:3.3},50:{5:172,10:121,15:97,30:66,60:40,120:24,360:11,720:6.4,1440:3.7},100:{5:192,10:135,15:109,30:74,60:44,120:27,360:12,720:7.2,1440:4.2}};function Xa(t,a){const i=Va[t];if(!i)return 0;const s=Object.keys(i).map(Number).sort((n,l)=>n-l);if(a<=s[0])return i[s[0]];if(a>=s[s.length-1])return i[s[s.length-1]];for(let n=0;n<s.length-1;n++)if(a>=s[n]&&a<=s[n+1]){const l=(Math.log(a)-Math.log(s[n]))/(Math.log(s[n+1])-Math.log(s[n]));return Math.exp(Math.log(i[s[n]])+l*(Math.log(i[s[n+1]])-Math.log(i[s[n]])))}return 0}function de(t){if(t<=0)return 0;if(t>=1)return 1;for(let a=0;a<Z.length-1;a++){const[i,s]=Z[a],[n,l]=Z[a+1];if(t>=i&&t<=n)return s+(t-i)/(n-i)*(l-s)}return 1}function Ya(t,a,i,s){const n=X[i],{Ks:l,psi:d}=n,r=n.theta_e-n.theta_i,m=1-s,f=a*60,u=a<=1?2:a<=6?5:10,x=Math.ceil(f/u),y=u/60;let v=.001,p=!1,A=0,g=0,k=0;const P=[];for(let S=0;S<x;S++){const h=S*u,j=(S+1)*u,c=de(h/f),b=(de(j/f)-c)*t,C=b/y,R=l*(1+d*r/v),E=R*y;let I,w;!p&&C<=R?(I=b,w=0):(p=!0,I=Math.min(E,b),w=Math.max(0,b-I)),v+=I;const L=I*m,D=w*m+b*s;A+=b,g+=L,k+=D;const ke=Math.floor(j/60),Pe=j%60;P.push({time:j,timeLabel:`${ke}:${Pe.toString().padStart(2,"0")}`,rainfall:+b.toFixed(3),intensity:+C.toFixed(1),infiltration:+L.toFixed(3),infRate:+(R*m).toFixed(1),runoff:+D.toFixed(3),cumRain:+A.toFixed(2),cumInf:+g.toFixed(2),cumRunoff:+k.toFixed(2)})}return P}function Ja(){const t=we(),[a,i]=o.useState("clayLoam"),[s,n]=o.useState(100),[l,d]=o.useState(6),r=t.analysisData?.lotSize??0,m=t.analysisData?.buildingArea??0,f=t.analysisData?.zoningPaveFrac??.15,u=r>0?Math.min((m+r*f)/r,.95):.5,y=Xa(s,l*60)*l,v=X[a],p=o.useMemo(()=>y<=0||r<=0?[]:Ya(y,l,a,u),[y,l,a,u,r]),A=p.reduce((c,N)=>Math.max(c,N.intensity),0),g=p.length>0?p[p.length-1].cumRunoff:0,k=p.length>0?p[p.length-1].cumInf:0,P=r>0?g*r/1e3:0,S=p.find(c=>c.runoff>.01),h={background:"#0a150a",border:"1px solid rgba(57,211,83,0.35)",borderRadius:2,color:"#39d353",fontSize:11,fontFamily:"'Share Tech Mono', monospace"},j=r>0&&y>0;return e.jsxs("div",{className:"precip-view",children:[e.jsxs("div",{className:"precip-sidebar eng-sidebar",children:[e.jsxs("div",{className:"precip-sidebar-header",children:[e.jsx("h2",{children:"Storm Simulation"}),e.jsx("p",{className:"precip-subtitle",children:"Green-Ampt Infiltration · SCS Type II Hyetograph"})]}),e.jsx(Re,{...t}),t.analysisData&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"precip-section",children:[e.jsx("label",{className:"precip-label",children:"Design Storm"}),e.jsxs("div",{className:"eng-manual-form",children:[e.jsxs("div",{className:"eng-field",children:[e.jsx("label",{className:"eng-field-label",children:"Return Period"}),e.jsx("select",{className:"dc-select",style:{width:"100%"},value:s,onChange:c=>n(+c.target.value),children:Ba.map(c=>e.jsxs("option",{value:c,children:[c,"-year"]},c))})]}),e.jsxs("div",{className:"eng-field",children:[e.jsx("label",{className:"eng-field-label",children:"Storm Duration"}),e.jsxs("select",{className:"dc-select",style:{width:"100%"},value:l,onChange:c=>d(+c.target.value),children:[e.jsx("option",{value:1,children:"1 hour"}),e.jsx("option",{value:6,children:"6 hours"}),e.jsx("option",{value:12,children:"12 hours"}),e.jsx("option",{value:24,children:"24 hours"})]})]}),e.jsxs("div",{className:"eng-field",children:[e.jsx("label",{className:"eng-field-label",children:"Soil Type (Green-Ampt)"}),e.jsx("select",{className:"dc-select",style:{width:"100%"},value:a,onChange:c=>i(c.target.value),children:Object.keys(X).map(c=>e.jsx("option",{value:c,children:X[c].label},c))})]})]})]}),e.jsxs("div",{className:"precip-section",children:[e.jsx("label",{className:"precip-label",children:"Soil Properties"}),e.jsxs("div",{className:"sim-soil-table",children:[e.jsxs("div",{className:"sim-soil-row",children:[e.jsxs("span",{children:["K",e.jsx("sub",{children:"s"})," (sat. conductivity)"]}),e.jsxs("strong",{children:[v.Ks," mm/hr"]})]}),e.jsxs("div",{className:"sim-soil-row",children:[e.jsx("span",{children:"ψ (capillary suction)"}),e.jsxs("strong",{children:[v.psi," mm"]})]}),e.jsxs("div",{className:"sim-soil-row",children:[e.jsxs("span",{children:["θ",e.jsx("sub",{children:"e"})," (eff. porosity)"]}),e.jsx("strong",{children:v.theta_e})]}),e.jsxs("div",{className:"sim-soil-row",children:[e.jsxs("span",{children:["M",e.jsx("sub",{children:"d"})," (moisture deficit)"]}),e.jsx("strong",{children:(v.theta_e-v.theta_i).toFixed(3)})]}),e.jsxs("div",{className:"sim-soil-row",children:[e.jsx("span",{children:"Impervious fraction"}),e.jsxs("strong",{children:[(u*100).toFixed(0),"%"]})]})]})]}),j&&e.jsxs("div",{className:"precip-section",children:[e.jsx("label",{className:"precip-label",children:"Results"}),e.jsxs("div",{className:"dc-stat-grid",children:[e.jsxs("div",{className:"dc-stat highlight",children:[e.jsxs("span",{className:"dc-stat-value",children:[y.toFixed(1)," mm"]}),e.jsx("span",{className:"dc-stat-label",children:"Total Rainfall"})]}),e.jsxs("div",{className:"dc-stat highlight",children:[e.jsxs("span",{className:"dc-stat-value",children:[g.toFixed(1)," mm"]}),e.jsx("span",{className:"dc-stat-label",children:"Total Runoff"})]}),e.jsxs("div",{className:"dc-stat",children:[e.jsxs("span",{className:"dc-stat-value",children:[k.toFixed(1)," mm"]}),e.jsx("span",{className:"dc-stat-label",children:"Infiltrated"})]}),e.jsxs("div",{className:"dc-stat",children:[e.jsxs("span",{className:"dc-stat-value",children:[A.toFixed(0)," mm/hr"]}),e.jsx("span",{className:"dc-stat-label",children:"Peak Intensity"})]}),e.jsxs("div",{className:"dc-stat",children:[e.jsxs("span",{className:"dc-stat-value",children:[P.toFixed(1)," m³"]}),e.jsx("span",{className:"dc-stat-label",children:"Runoff Volume"})]}),e.jsxs("div",{className:"dc-stat",children:[e.jsx("span",{className:"dc-stat-value",children:S?S.timeLabel:"N/A"}),e.jsx("span",{className:"dc-stat-label",children:"Ponding Begins"})]})]})]}),e.jsx("div",{className:"precip-section",children:e.jsxs("p",{className:"dc-note",children:["Model: Green-Ampt (f = K",e.jsx("sub",{children:"s"}),"(1 + ψM",e.jsx("sub",{children:"d"}),"/F)) with SCS Type II temporal distribution. Parameters from Rawls et al. (1983) per CIV E 321."]})})]}),e.jsxs("div",{className:"precip-section precip-footer-section",children:[e.jsxs("p",{className:"precip-hint",style:{fontSize:11},children:[e.jsx("strong",{children:"Real data:"})," Property — Edmonton Open Data. Soil params — Rawls et al. (1983). SCS Type II — USDA TR-55 (1986).",e.jsx("br",{}),e.jsx("strong",{children:"Approximate:"})," IDF intensities are representative of Edmonton, not verified from ECCC.",e.jsx("br",{}),"Theory: Bedient et al. (2019) · CIV E 321, U of A"]}),e.jsx("p",{className:"footer-credit",children:"HackED 2026 - University of Alberta"})]})]}),e.jsx("div",{className:"precip-main theme-dark",children:e.jsxs("div",{className:"sim-split-main",children:[e.jsx(Le,{handleMapClick:t.handleMapClick,markerPos:t.markerPos,visibleMarkers:t.visibleMarkers,selected:t.selected,setSelected:t.setSelected,setClickMarker:t.setClickMarker,clickMarker:t.clickMarker,clickLoading:t.clickLoading,mode:t.mode,compact:!0}),j?e.jsxs("div",{className:"sim-charts-area",children:[e.jsxs("div",{className:"export-bar",style:{borderBottom:"none",padding:"8px 0"},children:[e.jsxs("button",{className:"export-btn",onClick:()=>Ce(p.map(c=>({Time_hr:c.time,Intensity_mm_hr:c.intensity.toFixed(2),Infiltration_mm_hr:c.infRate.toFixed(2),Runoff_mm:c.runoff.toFixed(3),CumRain_mm:c.cumRain.toFixed(2),CumInfiltration_mm:c.cumInf.toFixed(2),CumRunoff_mm:c.cumRunoff.toFixed(2)})),"storm_simulation.csv"),children:[e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{d:"M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M7 10l5 5 5-5M12 15V3"})}),"CSV"]}),e.jsxs("button",{className:"export-btn",onClick:()=>{const c=document.querySelector(".sim-charts-area");c&&Ee(c,"storm_simulation.png")},children:[e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{d:"M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M7 10l5 5 5-5M12 15V3"})}),"PNG"]})]}),e.jsxs("div",{className:"sim-chart-card",children:[e.jsx("h4",{children:"Rainfall Hyetograph (SCS Type II)"}),e.jsx(K,{width:"100%",height:180,children:e.jsxs(se,{data:p,children:[e.jsx(F,{strokeDasharray:"3 3",stroke:"rgba(57,211,83,0.12)"}),e.jsx(W,{dataKey:"timeLabel",stroke:"rgba(57,211,83,0.4)",tick:{fontSize:9,fill:"rgba(57,211,83,0.5)"},minTickGap:30}),e.jsx(z,{stroke:"rgba(57,211,83,0.4)",tick:{fontSize:9,fill:"rgba(57,211,83,0.5)"},unit:" mm/hr"}),e.jsx(G,{contentStyle:h,formatter:c=>[`${c??0} mm/hr`]}),e.jsx(ne,{dataKey:"intensity",fill:"#3b82f6",name:"Rainfall Intensity",radius:[1,1,0,0]}),e.jsx(B,{wrapperStyle:{fontSize:10}})]})})]}),e.jsxs("div",{className:"sim-chart-card",children:[e.jsx("h4",{children:"Infiltration Capacity vs Rainfall (Green-Ampt)"}),e.jsx(K,{width:"100%",height:180,children:e.jsxs(ha,{data:p,children:[e.jsx(F,{strokeDasharray:"3 3",stroke:"rgba(57,211,83,0.12)"}),e.jsx(W,{dataKey:"timeLabel",stroke:"rgba(57,211,83,0.4)",tick:{fontSize:9,fill:"rgba(57,211,83,0.5)"},minTickGap:30}),e.jsx(z,{stroke:"rgba(57,211,83,0.4)",tick:{fontSize:9,fill:"rgba(57,211,83,0.5)"},unit:" mm/hr"}),e.jsx(G,{contentStyle:h}),e.jsx(le,{type:"monotone",dataKey:"intensity",stroke:"#3b82f6",name:"Rainfall (mm/hr)",dot:!1,strokeWidth:1.5}),e.jsx(le,{type:"monotone",dataKey:"infRate",stroke:"#22c55e",name:"Infiltration Capacity (mm/hr)",dot:!1,strokeWidth:1.5,strokeDasharray:"4 2"}),e.jsx(B,{wrapperStyle:{fontSize:10}})]})})]}),e.jsxs("div",{className:"sim-chart-card",children:[e.jsx("h4",{children:"Cumulative: Rainfall, Infiltration, Runoff (mm)"}),e.jsx(K,{width:"100%",height:200,children:e.jsxs(Ga,{data:p,children:[e.jsx(F,{strokeDasharray:"3 3",stroke:"rgba(57,211,83,0.12)"}),e.jsx(W,{dataKey:"timeLabel",stroke:"rgba(57,211,83,0.4)",tick:{fontSize:9,fill:"rgba(57,211,83,0.5)"},minTickGap:30}),e.jsx(z,{stroke:"rgba(57,211,83,0.4)",tick:{fontSize:9,fill:"rgba(57,211,83,0.5)"},unit:" mm"}),e.jsx(G,{contentStyle:h}),e.jsx(V,{type:"monotone",dataKey:"cumRain",stroke:"#3b82f6",fill:"#3b82f6",fillOpacity:.15,name:"Cumulative Rainfall",strokeWidth:2}),e.jsx(V,{type:"monotone",dataKey:"cumInf",stroke:"#22c55e",fill:"#22c55e",fillOpacity:.15,name:"Cumulative Infiltration",strokeWidth:2}),e.jsx(V,{type:"monotone",dataKey:"cumRunoff",stroke:"#ef4444",fill:"#ef4444",fillOpacity:.15,name:"Cumulative Runoff",strokeWidth:2}),e.jsx(B,{wrapperStyle:{fontSize:10}})]})})]}),e.jsxs("div",{className:"sim-chart-card",children:[e.jsx("h4",{children:"Runoff Depth per Interval (mm)"}),e.jsx(K,{width:"100%",height:160,children:e.jsxs(se,{data:p,children:[e.jsx(F,{strokeDasharray:"3 3",stroke:"rgba(57,211,83,0.12)"}),e.jsx(W,{dataKey:"timeLabel",stroke:"rgba(57,211,83,0.4)",tick:{fontSize:9,fill:"rgba(57,211,83,0.5)"},minTickGap:30}),e.jsx(z,{stroke:"rgba(57,211,83,0.4)",tick:{fontSize:9,fill:"rgba(57,211,83,0.5)"},unit:" mm"}),e.jsx(G,{contentStyle:h,formatter:c=>[`${(c??0).toFixed(2)} mm`]}),e.jsx(ne,{dataKey:"runoff",fill:"#ef4444",name:"Runoff Depth",radius:[1,1,0,0]}),e.jsx(B,{wrapperStyle:{fontSize:10}})]})})]}),e.jsxs("div",{className:"sim-waterbalance",children:[e.jsx("h4",{children:"Water Balance (P − R − G − E − T = ΔS)"}),e.jsxs("div",{className:"sim-wb-row",children:[e.jsxs("div",{className:"sim-wb-item",children:[e.jsx("span",{className:"sim-wb-label",children:"P (Precipitation)"}),e.jsxs("span",{className:"sim-wb-val",children:[p.length>0?p[p.length-1].cumRain.toFixed(1):0," mm"]})]}),e.jsx("span",{className:"sim-wb-op",children:"−"}),e.jsxs("div",{className:"sim-wb-item",children:[e.jsx("span",{className:"sim-wb-label",children:"R (Surface Runoff)"}),e.jsxs("span",{className:"sim-wb-val",children:[g.toFixed(1)," mm"]})]}),e.jsx("span",{className:"sim-wb-op",children:"−"}),e.jsxs("div",{className:"sim-wb-item",children:[e.jsx("span",{className:"sim-wb-label",children:"Infiltration"}),e.jsxs("span",{className:"sim-wb-val",children:[k.toFixed(1)," mm"]})]}),e.jsx("span",{className:"sim-wb-op",children:"="}),e.jsxs("div",{className:"sim-wb-item",children:[e.jsx("span",{className:"sim-wb-label",children:"ΔS (Residual)"}),e.jsxs("span",{className:"sim-wb-val",children:[(p.length>0?p[p.length-1].cumRain-g-k:0).toFixed(2)," mm"]})]})]}),e.jsx("p",{className:"dc-note",style:{marginTop:8},children:"Evaporation (E) and transpiration (T) neglected for storm-event timescale per CIV E 321 (Bedient et al., 2019). G (groundwater) included in infiltration term."})]})]}):e.jsx("div",{className:"precip-overlay-loading",style:{flex:1},children:"Search or enter a property to run simulation"})]})})]})}export{Ja as default};
