import{a as i,j as e}from"./index-BvPbTWQl.js";import{u as Ca,S as Ea,a as Sa}from"./SiteInputPanel-D7wYgJ8T.js";import{q as E,aq as ae,ar as wa,as as Ia,at as H,au as Da,av as Oa,aw as ca,ax as Ra,ay as Ma,o as K,az as ka,aA as Ta,aB as _a,aC as La,t as da,aD as Fa,aE as Ba,aF as Ga,aG as Ka,aH as ma,aI as $a,aJ as za,aK as Ua,Q as ua,aL as Va,r as Ie,m as pa,M as Wa,aM as Ha,J as ha,aN as va,f as J,aO as qa,h as De,j as Z,a1 as fa,aP as Oe,U as Qa,a4 as Xa,a6 as Ya,aQ as Za,a7 as Ye,i as Ze,aR as de,aS as Ja,ak as et,aT as at,aU as tt,aV as rt,aW as st,aX as nt,aY as it,aZ as lt,a_ as ot,ap as ct,aa as dt,a$ as mt,b0 as ee,b1 as Se,am as Je,ad as ut,b2 as pt,n as ht,u as vt,b3 as ft,b4 as gt,b5 as xt,b6 as jt,b7 as bt,b8 as yt,ah as Pt,R as ea,B as At,C as Nt,X as Ct,Y as Et,T as aa,a as St,L as wt}from"./BarChart-DLJgLryj.js";import"./with-selector-ByD7akMp.js";var ga=a=>a.graphicalItems.polarItems,It=E([ae,wa],Ia),me=E([ga,H,It],Da),Dt=E([me],Oa),ue=E([Dt,ca],Ra),Ot=E([ue,H,me],Ma);E([ue,H,me],(a,t,s)=>s.length>0?a.flatMap(r=>s.flatMap(n=>{var c,m=K(r,(c=t.dataKey)!==null&&c!==void 0?c:n.dataKey);return{value:m,errorDomain:[]}})).filter(Boolean):t?.dataKey!=null?a.map(r=>({value:K(r,t.dataKey),errorDomain:[]})):a.map(r=>({value:r,errorDomain:[]})));var ta=()=>{},Rt=E([ue,H,me,ka,ae],Ta),Mt=E([H,_a,La,ta,Rt,ta,da,ae],Fa),xa=E([H,da,ue,Ot,Ba,ae,Mt],Ga),kt=E([xa,Ka,ma],$a),Tt=E([H,xa,kt,ae],za);E([ma,Tt],Ua);function ra(a,t){var s=Object.keys(a);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(a);t&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(a,n).enumerable})),s.push.apply(s,r)}return s}function sa(a){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?ra(Object(s),!0).forEach(function(r){_t(a,r,s[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(s)):ra(Object(s)).forEach(function(r){Object.defineProperty(a,r,Object.getOwnPropertyDescriptor(s,r))})}return a}function _t(a,t,s){return(t=Lt(t))in a?Object.defineProperty(a,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):a[t]=s,a}function Lt(a){var t=Ft(a,"string");return typeof t=="symbol"?t:t+""}function Ft(a,t){if(typeof a!="object"||!a)return a;var s=a[Symbol.toPrimitive];if(s!==void 0){var r=s.call(a,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(a)}var Bt=(a,t)=>t,Re=E([ga,Bt],(a,t)=>a.filter(s=>s.type==="pie").find(s=>s.id===t)),Gt=[],Me=(a,t,s)=>s?.length===0?Gt:s,ja=E([ca,Re,Me],(a,t,s)=>{var{chartData:r}=a;if(t!=null){var n;if(t?.data!=null&&t.data.length>0?n=t.data:n=r,(!n||!n.length)&&s!=null&&(n=s.map(c=>sa(sa({},t.presentationProps),c.props))),n!=null)return n}}),Kt=E([ja,Re,Me],(a,t,s)=>{if(!(a==null||t==null))return a.map((r,n)=>{var c,m=K(r,t.nameKey,t.name),p;return s!=null&&(c=s[n])!==null&&c!==void 0&&(c=c.props)!==null&&c!==void 0&&c.fill?p=s[n].props.fill:typeof r=="object"&&r!=null&&"fill"in r?p=r.fill:p=t.fill,{value:ua(m,t.dataKey),color:p,payload:r,type:t.legendType}})}),$t=E([ja,Re,Me,Va],(a,t,s,r)=>{if(!(t==null||a==null))return or({offset:r,pieSettings:t,displayedData:a,cells:s})}),zt=["key"],Ut=["onMouseEnter","onClick","onMouseLeave"],Vt=["id"],Wt=["id"];function na(a,t){var s=Object.keys(a);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(a);t&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(a,n).enumerable})),s.push.apply(s,r)}return s}function f(a){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?na(Object(s),!0).forEach(function(r){Ht(a,r,s[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(s)):na(Object(s)).forEach(function(r){Object.defineProperty(a,r,Object.getOwnPropertyDescriptor(s,r))})}return a}function Ht(a,t,s){return(t=qt(t))in a?Object.defineProperty(a,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):a[t]=s,a}function qt(a){var t=Qt(a,"string");return typeof t=="symbol"?t:t+""}function Qt(a,t){if(typeof a!="object"||!a)return a;var s=a[Symbol.toPrimitive];if(s!==void 0){var r=s.call(a,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(a)}function $(){return $=Object.assign?Object.assign.bind():function(a){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)({}).hasOwnProperty.call(s,r)&&(a[r]=s[r])}return a},$.apply(null,arguments)}function pe(a,t){if(a==null)return{};var s,r,n=Xt(a,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(a);for(r=0;r<c.length;r++)s=c[r],t.indexOf(s)===-1&&{}.propertyIsEnumerable.call(a,s)&&(n[s]=a[s])}return n}function Xt(a,t){if(a==null)return{};var s={};for(var r in a)if({}.hasOwnProperty.call(a,r)){if(t.indexOf(r)!==-1)continue;s[r]=a[r]}return s}function Yt(a){var t=i.useMemo(()=>va(a.children,Oe),[a.children]),s=J(r=>Kt(r,a.id,t));return s==null?null:i.createElement(qa,{legendPayload:s})}var Zt=i.memo(a=>{var{dataKey:t,nameKey:s,sectors:r,stroke:n,strokeWidth:c,fill:m,name:p,hide:j,tooltipType:v,id:y}=a,b={dataDefinedOnItem:r.map(d=>d.tooltipPayload),getPosition:d=>{var g;return(g=r[Number(d)])===null||g===void 0?void 0:g.tooltipPosition},settings:{stroke:n,strokeWidth:c,fill:m,dataKey:t,nameKey:s,name:ua(p,t),hide:j,type:v,color:m,unit:"",graphicalItemId:y}};return i.createElement(Qa,{tooltipEntrySettings:b})}),Jt=(a,t)=>a>t?"start":a<t?"end":"middle",er=(a,t,s)=>typeof t=="function"?ee(t(a),s,s*.8):ee(t,s,s*.8),ar=(a,t,s)=>{var{top:r,left:n,width:c,height:m}=t,p=mt(c,m),j=n+ee(a.cx,c,c/2),v=r+ee(a.cy,m,m/2),y=ee(a.innerRadius,p,0),b=er(s,a.outerRadius,p),d=a.maxRadius||Math.sqrt(c*c+m*m)/2;return{cx:j,cy:v,innerRadius:y,outerRadius:b,maxRadius:d}},tr=(a,t)=>{var s=de(t-a),r=Math.min(Math.abs(t-a),360);return s*r},rr=(a,t)=>{if(i.isValidElement(a))return i.cloneElement(a,t);if(typeof a=="function")return a(t);var s=De("recharts-pie-label-line",typeof a!="boolean"?a.className:""),{key:r}=t,n=pe(t,zt);return i.createElement(ut,$({},n,{type:"linear",className:s}))},sr=(a,t,s)=>{if(i.isValidElement(a))return i.cloneElement(a,t);var r=s;if(typeof a=="function"&&(r=a(t),i.isValidElement(r)))return r;var n=De("recharts-pie-label-text",pt(a));return i.createElement(ht,$({},t,{alignmentBaseline:"middle",className:n}),r)};function nr(a){var{sectors:t,props:s,showLabels:r}=a,{label:n,labelLine:c,dataKey:m}=s;if(!r||!n||!t)return null;var p=pa(s),j=Je(n),v=Je(c),y=typeof n=="object"&&"offsetRadius"in n&&typeof n.offsetRadius=="number"&&n.offsetRadius||20,b=t.map((d,g)=>{var D=(d.startAngle+d.endAngle)/2,N=Se(d.cx,d.cy,d.outerRadius+y,D),O=f(f(f(f({},p),d),{},{stroke:"none"},j),{},{index:g,textAnchor:Jt(N.x,d.cx)},N),h=f(f(f(f({},p),d),{},{fill:"none",stroke:d.fill},v),{},{index:g,points:[Se(d.cx,d.cy,d.outerRadius,D),N],key:"line"});return i.createElement(fa,{zIndex:ha.label,key:"label-".concat(d.startAngle,"-").concat(d.endAngle,"-").concat(d.midAngle,"-").concat(g)},i.createElement(Z,null,c&&rr(c,h),sr(n,O,K(d,m))))});return i.createElement(Z,{className:"recharts-pie-labels"},b)}function ir(a){var{sectors:t,props:s,showLabels:r}=a,{label:n}=s;return typeof n=="object"&&n!=null&&"position"in n?i.createElement(dt,{label:n}):i.createElement(nr,{sectors:t,props:s,showLabels:r})}function lr(a){var{sectors:t,activeShape:s,inactiveShape:r,allOtherPieProps:n,shape:c,id:m}=a,p=J(et),j=J(at),v=J(tt),{onMouseEnter:y,onClick:b,onMouseLeave:d}=n,g=pe(n,Ut),D=rt(y,n.dataKey,m),N=st(d),O=nt(b,n.dataKey,m);return t==null||t.length===0?null:i.createElement(i.Fragment,null,t.map((h,S)=>{if(h?.startAngle===0&&h?.endAngle===0&&t.length!==1)return null;var k=v==null||v===m,R=String(S)===p&&(j==null||n.dataKey===j)&&k,I=p?r:null,C=s&&R?s:I,P=f(f({},h),{},{stroke:h.stroke,tabIndex:-1,[lt]:S,[it]:m});return i.createElement(Z,$({key:"sector-".concat(h?.startAngle,"-").concat(h?.endAngle,"-").concat(h.midAngle,"-").concat(S),tabIndex:-1,className:"recharts-pie-sector"},ot(g,h,S),{onMouseEnter:D(h,S),onMouseLeave:N(h,S),onClick:O(h,S)}),i.createElement(ct,$({option:c??C,index:S,shapeType:"sector",isActive:R},P)))}))}function or(a){var t,{pieSettings:s,displayedData:r,cells:n,offset:c}=a,{cornerRadius:m,startAngle:p,endAngle:j,dataKey:v,nameKey:y,tooltipType:b}=s,d=Math.abs(s.minAngle),g=tr(p,j),D=Math.abs(g),N=r.length<=1?0:(t=s.paddingAngle)!==null&&t!==void 0?t:0,O=r.filter(C=>K(C,v,0)!==0).length,h=(D>=360?O:O-1)*N,S=D-O*d-h,k=r.reduce((C,P)=>{var A=K(P,v,0);return C+(Ze(A)?A:0)},0),R;if(k>0){var I;R=r.map((C,P)=>{var A=K(C,v,0),G=K(C,y,P),M=ar(s,c,C),T=(Ze(A)?A:0)/k,L,F=f(f({},C),n&&n[P]&&n[P].props);P?L=I.endAngle+de(g)*N*(A!==0?1:0):L=p;var q=L+de(g)*((A!==0?d:0)+T*S),z=(L+q)/2,Q=(M.innerRadius+M.outerRadius)/2,U=[{name:G,value:A,payload:F,dataKey:v,type:b,graphicalItemId:s.id}],he=Se(M.cx,M.cy,Q,z);return I=f(f(f(f({},s.presentationProps),{},{percent:T,cornerRadius:typeof m=="string"?parseFloat(m):m,name:G,tooltipPayload:U,midAngle:z,middleRadius:Q,tooltipPosition:he},F),M),{},{value:A,dataKey:v,startAngle:L,endAngle:q,payload:F,paddingAngle:de(g)*N}),I})}return R}function cr(a){var{showLabels:t,sectors:s,children:r}=a,n=i.useMemo(()=>!t||!s?[]:s.map(c=>({value:c.value,payload:c.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:c.cx,cy:c.cy,innerRadius:c.innerRadius,outerRadius:c.outerRadius,startAngle:c.startAngle,endAngle:c.endAngle,clockWise:!1},fill:c.fill})),[s,t]);return i.createElement(Ja,{value:t?n:void 0},r)}function dr(a){var{props:t,previousSectorsRef:s,id:r}=a,{sectors:n,isAnimationActive:c,animationBegin:m,animationDuration:p,animationEasing:j,activeShape:v,inactiveShape:y,onAnimationStart:b,onAnimationEnd:d}=t,g=Xa(t,"recharts-pie-"),D=s.current,[N,O]=i.useState(!1),h=i.useCallback(()=>{typeof d=="function"&&d(),O(!1)},[d]),S=i.useCallback(()=>{typeof b=="function"&&b(),O(!0)},[b]);return i.createElement(cr,{showLabels:!N,sectors:n},i.createElement(Ya,{animationId:g,begin:m,duration:p,isActive:c,easing:j,onAnimationStart:S,onAnimationEnd:h,key:g},k=>{var R,I=[],C=n&&n[0],P=(R=C?.startAngle)!==null&&R!==void 0?R:0;return n?.forEach((A,G)=>{var M=D&&D[G],T=G>0?Za(A,"paddingAngle",0):0;if(M){var L=Ye(M.endAngle-M.startAngle,A.endAngle-A.startAngle,k),F=f(f({},A),{},{startAngle:P+T,endAngle:P+L+T});I.push(F),P=F.endAngle}else{var{endAngle:q,startAngle:z}=A,Q=Ye(0,q-z,k),U=f(f({},A),{},{startAngle:P+T,endAngle:P+Q+T});I.push(U),P=U.endAngle}}),s.current=I,i.createElement(Z,null,i.createElement(lr,{sectors:I,activeShape:v,inactiveShape:y,allOtherPieProps:t,shape:t.shape,id:r}))}),i.createElement(ir,{showLabels:!N,sectors:n,props:t}),t.children)}var mr={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:"auto",label:!1,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff",zIndex:ha.area};function ur(a){var{id:t}=a,s=pe(a,Vt),{hide:r,className:n,rootTabIndex:c}=a,m=i.useMemo(()=>va(a.children,Oe),[a.children]),p=J(y=>$t(y,t,m)),j=i.useRef(null),v=De("recharts-pie",n);return r||p==null?(j.current=null,i.createElement(Z,{tabIndex:c,className:v})):i.createElement(fa,{zIndex:a.zIndex},i.createElement(Zt,{dataKey:a.dataKey,nameKey:a.nameKey,sectors:p,stroke:a.stroke,strokeWidth:a.strokeWidth,fill:a.fill,name:a.name,hide:a.hide,tooltipType:a.tooltipType,id:t}),i.createElement(Z,{tabIndex:c,className:v},i.createElement(dr,{props:f(f({},s),{},{sectors:p}),previousSectorsRef:j,id:t})))}function ba(a){var t=Ie(a,mr),{id:s}=t,r=pe(t,Wt),n=pa(r);return i.createElement(Wa,{id:s,type:"pie"},c=>i.createElement(i.Fragment,null,i.createElement(Ha,{type:"pie",id:c,data:r.data,dataKey:r.dataKey,hide:r.hide,angleAxisId:0,radiusAxisId:0,name:r.name,nameKey:r.nameKey,tooltipType:r.tooltipType,legendType:r.legendType,fill:r.fill,cx:r.cx,cy:r.cy,startAngle:r.startAngle,endAngle:r.endAngle,paddingAngle:r.paddingAngle,minAngle:r.minAngle,innerRadius:r.innerRadius,outerRadius:r.outerRadius,cornerRadius:r.cornerRadius,presentationProps:n,maxRadius:t.maxRadius}),i.createElement(Yt,$({},r,{id:c})),i.createElement(ur,$({},r,{id:c}))))}ba.displayName="Pie";function pr(a){var t=vt();return i.useEffect(()=>{t(ft(a))},[t,a]),null}var hr=["layout"];function we(){return we=Object.assign?Object.assign.bind():function(a){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)({}).hasOwnProperty.call(s,r)&&(a[r]=s[r])}return a},we.apply(null,arguments)}function vr(a,t){if(a==null)return{};var s,r,n=fr(a,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(a);for(r=0;r<c.length;r++)s=c[r],t.indexOf(s)===-1&&{}.propertyIsEnumerable.call(a,s)&&(n[s]=a[s])}return n}function fr(a,t){if(a==null)return{};var s={};for(var r in a)if({}.hasOwnProperty.call(a,r)){if(t.indexOf(r)!==-1)continue;s[r]=a[r]}return s}var gr={top:5,right:5,bottom:5,left:5},ya={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:gr,reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},xr=i.forwardRef(function(t,s){var r,n=Ie(t.categoricalChartProps,ya),{layout:c}=n,m=vr(n,hr),{chartName:p,defaultTooltipEventType:j,validateTooltipEventTypes:v,tooltipPayloadSearcher:y}=t,b={chartName:p,defaultTooltipEventType:j,validateTooltipEventTypes:v,tooltipPayloadSearcher:y,eventEmitter:void 0};return i.createElement(gt,{preloadedState:{options:b},reduxStoreName:(r=n.id)!==null&&r!==void 0?r:p},i.createElement(xt,{chartData:n.data}),i.createElement(jt,{layout:c,margin:n.margin}),i.createElement(bt,{baseValue:void 0,accessibilityLayer:n.accessibilityLayer,barCategoryGap:n.barCategoryGap,maxBarSize:n.maxBarSize,stackOffset:n.stackOffset,barGap:n.barGap,barSize:n.barSize,syncId:n.syncId,syncMethod:n.syncMethod,className:n.className,reverseStackOrder:n.reverseStackOrder}),i.createElement(pr,{cx:n.cx,cy:n.cy,startAngle:n.startAngle,endAngle:n.endAngle,innerRadius:n.innerRadius,outerRadius:n.outerRadius}),i.createElement(yt,we({},m,{ref:s})))});function ia(a,t){var s=Object.keys(a);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(a);t&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(a,n).enumerable})),s.push.apply(s,r)}return s}function la(a){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?ia(Object(s),!0).forEach(function(r){jr(a,r,s[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(s)):ia(Object(s)).forEach(function(r){Object.defineProperty(a,r,Object.getOwnPropertyDescriptor(s,r))})}return a}function jr(a,t,s){return(t=br(t))in a?Object.defineProperty(a,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):a[t]=s,a}function br(a){var t=yr(a,"string");return typeof t=="symbol"?t:t+""}function yr(a,t){if(typeof a!="object"||!a)return a;var s=a[Symbol.toPrimitive];if(s!==void 0){var r=s.call(a,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(a)}var Pr=["item"],Ar=la(la({},ya),{},{layout:"centric",startAngle:0,endAngle:360}),Nr=i.forwardRef((a,t)=>{var s=Ie(a,Ar);return i.createElement(xr,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:Pr,tooltipPayloadSearcher:Pt,categoricalChartProps:s,ref:t})});const oa=[{dia_mm:100,pvc:95,hdpe:110,concrete:0},{dia_mm:150,pvc:125,hdpe:140,concrete:0},{dia_mm:200,pvc:160,hdpe:175,concrete:195},{dia_mm:250,pvc:195,hdpe:215,concrete:240},{dia_mm:300,pvc:240,hdpe:265,concrete:285},{dia_mm:375,pvc:300,hdpe:330,concrete:355},{dia_mm:450,pvc:420,hdpe:460,concrete:430},{dia_mm:525,pvc:0,hdpe:560,concrete:520},{dia_mm:600,pvc:0,hdpe:650,concrete:600},{dia_mm:750,pvc:0,hdpe:0,concrete:780},{dia_mm:900,pvc:0,hdpe:0,concrete:980},{dia_mm:1050,pvc:0,hdpe:0,concrete:1250},{dia_mm:1200,pvc:0,hdpe:0,concrete:1500}],Cr={pvc:"PVC (Polyvinyl Chloride)",hdpe:"HDPE (High-Density Polyethylene)",concrete:"Reinforced Concrete"},Er=.15,Sr=.1,wr=[2,5,10,25,50,100],Ir={2:{5:82,10:56,15:45,30:30,60:18,120:11,360:5,720:3,1440:1.7},5:{5:110,10:76,15:61,30:41,60:25,120:15,360:6.8,720:4,1440:2.3},10:{5:128,10:89,15:72,30:48,60:29,120:18,360:8,720:4.7,1440:2.7},25:{5:153,10:107,15:86,30:58,60:35,120:21,360:9.6,720:5.6,1440:3.3},50:{5:172,10:121,15:97,30:66,60:40,120:24,360:11,720:6.4,1440:3.7},100:{5:192,10:135,15:109,30:74,60:44,120:27,360:12,720:7.2,1440:4.2}};function Dr(a,t){const s=Ir[a];if(!s)return 0;const r=Object.keys(s).map(Number).sort((n,c)=>n-c);if(t<=r[0])return s[r[0]];if(t>=r[r.length-1])return s[r[r.length-1]];for(let n=0;n<r.length-1;n++)if(t>=r[n]&&t<=r[n+1]){const c=(Math.log(t)-Math.log(r[n]))/(Math.log(r[n+1])-Math.log(r[n]));return Math.exp(Math.log(s[r[n]])+c*(Math.log(s[r[n+1]])-Math.log(s[r[n]])))}return 0}const Ee=[100,150,200,250,300,375,450,525,600,750,900,1050,1200];function Or(a){const r=a*.013/Math.sqrt(.005);return Math.pow(r*Math.pow(4,2/3)/Math.PI,3/8)*2*1e3}function Rr(a){return Ee.find(t=>t>=a)??Ee[Ee.length-1]}function Lr(){const a=Ca(),[t,s]=i.useState(100),[r,n]=i.useState("pvc"),[c,m]=i.useState(""),[p,j]=i.useState(""),[v,y]=i.useState(""),[b,d]=i.useState(!1),[g,D]=i.useState(!1),[N,O]=i.useState(!1),[h,S]=i.useState(!1),[k,R]=i.useState("3500"),[I,C]=i.useState("6000"),[P,A]=i.useState("22"),[G,M]=i.useState("15"),[T,L]=i.useState("250"),[F,q]=i.useState("175"),[z,Q]=i.useState("140"),[U,he]=i.useState("110"),ve=parseFloat(k)||0,fe=parseFloat(I)||0,ge=parseFloat(P)||0,xe=parseFloat(G)||0,je=parseFloat(T)||0,be=parseFloat(F)||0,ye=parseFloat(z)||0,Pe=parseFloat(U)||0,x=a.analysisData?.lotSize??0,B=a.analysisData?.buildingArea??0,te=a.analysisData?.zoningPaveFrac??.15;i.useEffect(()=>{if(x<=0)return;const l=Math.sqrt(x),w=Math.round(l*.6+3);m(String(w));const V=B+x*te,X=Math.max(1,Math.ceil(V/400));j(String(X));const W=Math.max(1,Math.ceil(w/90));y(String(W))},[x,B,te]);const re=parseFloat(c)||0,Ae=parseInt(p)||0,Ne=parseInt(v)||0,_=i.useMemo(()=>{if(x<=0)return null;const l=x*te,w=Math.max(0,x-B-l),V=(B*.95+l*.9+w*.3)/x,X=.0195*Math.pow(Math.sqrt(x),.77)/Math.pow(.005,.385),W=Math.min(30,Math.max(5,X)),Y=Dr(t,W),se=V*Y*(x/1e4)/360,ne=Or(se),ie=Rr(ne);return{C:V,tc:W,i:Y,Q:se,pipe_mm:ie}},[x,B,t,te]),o=i.useMemo(()=>{if(!_)return null;const l=oa.find(ce=>ce.dia_mm>=_.pipe_mm);if(!l)return null;let w=l[r];if(w===0){const ce=["pvc","hdpe","concrete"].filter(Na=>l[Na]>0);w=ce.length>0?l[ce[0]]:500}const V=w*re,X=Ae*ve,W=Ne*fe,Y=l.dia_mm/1e3,se=2.4,ne=.15,ie=Math.max(se+Y+ne,2.1+Y+ne),Le=Math.max(.6,Y+.45),le=ie*Le*re,Fe=le*ge,Be=le*xe,Ge=b?B*.5:0,Ke=g?x*.05:0,$e=N?x*.15:0,ze=h?Math.sqrt(x)*.5:0,Ue=Ge*je,Ve=Ke*be,We=$e*ye,He=ze*Pe,Ce=Ue+Ve+We+He,qe=V+X+W+Fe+Be,oe=qe+Ce,Qe=oe*Er,Xe=oe*Sr,Aa=oe+Qe+Xe;return{pipe:{dia:l.dia_mm,material:r,unitCost:w,length:re,cost:V},catchBasins:{count:Ae,unitCost:ve,cost:X},manholes:{count:Ne,unitCost:fe,cost:W},excavation:{vol:le,cost:Fe,depth:ie,width:Le},backfill:{vol:le,cost:Be},lid:{greenRoof:{area:Ge,cost:Ue},rainGarden:{area:Ke,cost:Ve},permPave:{area:$e,cost:We},bioswale:{len:ze,cost:He},total:Ce},infraTotal:qe,lidTotal:Ce,subtotal:oe,engineering:Qe,contingency:Xe,grandTotal:Aa}},[_,r,re,Ae,Ne,b,g,N,h,x,B,ve,fe,ge,xe,je,be,ye,Pe]),Pa=i.useMemo(()=>o?[{name:"Storm Pipe",cost:o.pipe.cost},{name:"Catch Basins",cost:o.catchBasins.cost},{name:"Manholes",cost:o.manholes.cost},{name:"Excavation",cost:o.excavation.cost},{name:"Backfill",cost:o.backfill.cost},...o.lid.greenRoof.cost>0?[{name:"Green Roof",cost:o.lid.greenRoof.cost}]:[],...o.lid.rainGarden.cost>0?[{name:"Rain Garden",cost:o.lid.rainGarden.cost}]:[],...o.lid.permPave.cost>0?[{name:"Perm. Pave",cost:o.lid.permPave.cost}]:[],...o.lid.bioswale.cost>0?[{name:"Bio-swale",cost:o.lid.bioswale.cost}]:[],{name:"Engineering (15%)",cost:o.engineering},{name:"Contingency (10%)",cost:o.contingency}]:[],[o]),ke=i.useMemo(()=>o?[{name:"Storm Infrastructure",value:o.infraTotal},{name:"LID Features",value:o.lidTotal},{name:"Eng. & Contingency",value:o.engineering+o.contingency}].filter(l=>l.value>0):[],[o]),Te=["#3b82f6","#22c55e","#f59e0b","#ef4444"],_e={background:"#0a150a",border:"1px solid rgba(57,211,83,0.35)",borderRadius:2,color:"#39d353",fontSize:11,fontFamily:"'Share Tech Mono', monospace"},u=l=>"$"+l.toLocaleString("en-CA",{minimumFractionDigits:0,maximumFractionDigits:0});return e.jsxs("div",{className:"precip-view",children:[e.jsxs("div",{className:"precip-sidebar eng-sidebar",children:[e.jsxs("div",{className:"precip-sidebar-header",children:[e.jsx("h2",{children:"Cost Analysis"}),e.jsx("p",{className:"precip-subtitle",children:"Stormwater Infrastructure · LID Features"})]}),e.jsx(Ea,{...a}),a.analysisData&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"precip-section",children:[e.jsx("label",{className:"precip-label",children:"Pipe Infrastructure"}),e.jsxs("div",{className:"eng-manual-form",children:[e.jsxs("div",{className:"eng-field",children:[e.jsx("label",{className:"eng-field-label",children:"Design Return Period"}),e.jsx("select",{className:"dc-select",style:{width:"100%"},value:t,onChange:l=>s(+l.target.value),children:wr.map(l=>e.jsxs("option",{value:l,children:[l,"-year"]},l))})]}),e.jsxs("div",{className:"eng-field",children:[e.jsx("label",{className:"eng-field-label",children:"Pipe Material"}),e.jsxs("select",{className:"dc-select",style:{width:"100%"},value:r,onChange:l=>n(l.target.value),children:[e.jsx("option",{value:"pvc",children:"PVC"}),e.jsx("option",{value:"hdpe",children:"HDPE"}),e.jsx("option",{value:"concrete",children:"Reinforced Concrete"})]})]}),e.jsxs("div",{className:"eng-field",children:[e.jsx("label",{className:"eng-field-label",children:"Pipe Run Length (m)"}),e.jsx("input",{type:"number",className:"prop-input",value:c,onChange:l=>m(l.target.value),min:"1"}),e.jsx("span",{style:{fontSize:9,opacity:.5,marginTop:2,display:"block"},children:"Auto-estimated from lot (≈ 60% of side length + 3m connection)"})]}),e.jsxs("div",{className:"eng-field",children:[e.jsx("label",{className:"eng-field-label",children:"Catch Basins"}),e.jsx("input",{type:"number",className:"prop-input",value:p,onChange:l=>j(l.target.value),min:"0"})]}),e.jsxs("div",{className:"eng-field",children:[e.jsx("label",{className:"eng-field-label",children:"Manholes"}),e.jsx("input",{type:"number",className:"prop-input",value:v,onChange:l=>y(l.target.value),min:"0"})]})]})]}),e.jsxs("div",{className:"precip-section",children:[e.jsxs("label",{className:"precip-label",children:["Unit Rates (CAD) ",e.jsx("span",{style:{fontSize:9,opacity:.5},children:"— enter your own"})]}),e.jsx("p",{style:{fontSize:9,opacity:.5,margin:"0 0 6px"},children:"No verified public source found. Defaults are placeholders — replace with actual quotes."}),e.jsxs("div",{className:"eng-manual-form",style:{gap:4},children:[e.jsxs("div",{className:"eng-field",children:[e.jsx("label",{className:"eng-field-label",children:"Catch Basin ($/ea)"}),e.jsx("input",{type:"number",className:"prop-input",value:k,onChange:l=>R(l.target.value),min:"0"})]}),e.jsxs("div",{className:"eng-field",children:[e.jsx("label",{className:"eng-field-label",children:"Manhole ($/ea)"}),e.jsx("input",{type:"number",className:"prop-input",value:I,onChange:l=>C(l.target.value),min:"0"})]}),e.jsxs("div",{className:"eng-field",children:[e.jsx("label",{className:"eng-field-label",children:"Excavation ($/m³)"}),e.jsx("input",{type:"number",className:"prop-input",value:P,onChange:l=>A(l.target.value),min:"0"})]}),e.jsxs("div",{className:"eng-field",children:[e.jsx("label",{className:"eng-field-label",children:"Backfill ($/m³)"}),e.jsx("input",{type:"number",className:"prop-input",value:G,onChange:l=>M(l.target.value),min:"0"})]}),e.jsxs("div",{className:"eng-field",children:[e.jsx("label",{className:"eng-field-label",children:"Green Roof ($/m²)"}),e.jsx("input",{type:"number",className:"prop-input",value:T,onChange:l=>L(l.target.value),min:"0"})]}),e.jsxs("div",{className:"eng-field",children:[e.jsx("label",{className:"eng-field-label",children:"Rain Garden ($/m²)"}),e.jsx("input",{type:"number",className:"prop-input",value:F,onChange:l=>q(l.target.value),min:"0"})]}),e.jsxs("div",{className:"eng-field",children:[e.jsx("label",{className:"eng-field-label",children:"Permeable Pave ($/m²)"}),e.jsx("input",{type:"number",className:"prop-input",value:z,onChange:l=>Q(l.target.value),min:"0"})]}),e.jsxs("div",{className:"eng-field",children:[e.jsx("label",{className:"eng-field-label",children:"Bio-swale ($/lm)"}),e.jsx("input",{type:"number",className:"prop-input",value:U,onChange:l=>he(l.target.value),min:"0"})]})]})]}),e.jsxs("div",{className:"precip-section",children:[e.jsx("label",{className:"precip-label",children:"LID Features (Optional)"}),e.jsx("div",{className:"dc-lid-grid",style:{gap:6},children:[{key:"greenRoof",label:"Green Roof",desc:`~${B>0?(B*.5).toFixed(0):0} m²`,val:b,set:d},{key:"rainGarden",label:"Rain Garden",desc:`~${x>0?(x*.05).toFixed(0):0} m²`,val:g,set:D},{key:"permPave",label:"Permeable Pave",desc:`~${x>0?(x*.15).toFixed(0):0} m²`,val:N,set:O},{key:"bioswale",label:"Bio-swale",desc:`~${x>0?(Math.sqrt(x)*.5).toFixed(0):0} m`,val:h,set:S}].map(l=>e.jsxs("button",{className:`dc-lid-btn ${l.val?"dc-lid-on":""}`,onClick:()=>l.set(!l.val),children:[e.jsx("strong",{children:l.label}),e.jsx("span",{style:{fontSize:10,opacity:.7},children:l.desc})]},l.key))})]}),_&&e.jsxs("div",{className:"precip-section",children:[e.jsxs("label",{className:"precip-label",children:["Drainage Design Basis ",e.jsx("span",{style:{fontSize:9,opacity:.5},children:"(approx. IDF)"})]}),e.jsxs("div",{className:"sim-soil-table",children:[e.jsxs("div",{className:"sim-soil-row",children:[e.jsx("span",{children:"Composite C"}),e.jsx("strong",{children:_.C.toFixed(2)})]}),e.jsxs("div",{className:"sim-soil-row",children:[e.jsx("span",{children:"Design Intensity"}),e.jsxs("strong",{children:[_.i.toFixed(1)," mm/hr"]})]}),e.jsxs("div",{className:"sim-soil-row",children:[e.jsx("span",{children:"Peak Discharge (Q)"}),e.jsxs("strong",{children:[(_.Q*1e3).toFixed(1)," L/s"]})]}),e.jsxs("div",{className:"sim-soil-row",children:[e.jsx("span",{children:"Required Pipe"}),e.jsxs("strong",{children:[_.pipe_mm," mm"]})]}),o&&e.jsxs("div",{className:"sim-soil-row",children:[e.jsx("span",{children:"Trench Depth (2.4m min cover)"}),e.jsxs("strong",{children:[o.excavation.depth.toFixed(2)," m"]})]}),o&&e.jsxs("div",{className:"sim-soil-row",children:[e.jsx("span",{children:"Trench Width"}),e.jsxs("strong",{children:[o.excavation.width.toFixed(2)," m"]})]})]})]})]}),e.jsxs("div",{className:"precip-section precip-footer-section",children:[e.jsxs("p",{className:"precip-hint",style:{fontSize:11},children:[e.jsx("strong",{children:"Real data:"})," Property & stormwater facilities — Edmonton Open Data API. Engineering formulas (Rational Method, Manning's) are standard methods.",e.jsx("br",{}),e.jsx("strong",{children:"User-provided:"})," All unit costs are editable — no verified public source exists for Alberta infrastructure unit rates. Pipe catalogue rates are defaults only.",e.jsx("br",{}),e.jsx("strong",{children:"Approximate:"})," IDF intensities for Edmonton. Impervious ratios from zoning."]}),e.jsx("p",{className:"footer-credit",children:"HackED 2026 - University of Alberta"})]})]}),e.jsx("div",{className:"precip-main theme-dark",children:e.jsxs("div",{className:"sim-split-main",children:[e.jsx(Sa,{handleMapClick:a.handleMapClick,markerPos:a.markerPos,visibleMarkers:a.visibleMarkers,selected:a.selected,setSelected:a.setSelected,setClickMarker:a.setClickMarker,clickMarker:a.clickMarker,clickLoading:a.clickLoading,mode:a.mode,compact:!0}),o?e.jsxs("div",{className:"sim-charts-area",children:[e.jsxs("div",{className:"sim-chart-card",children:[e.jsxs("h4",{children:["Cost Estimate Summary ",e.jsx("span",{style:{fontSize:10,opacity:.5,fontWeight:400},children:"(based on user-provided unit rates)"})]}),e.jsxs("div",{className:"cost-summary-grid",children:[e.jsxs("div",{className:"cost-summary-item cost-total",children:[e.jsx("span",{className:"cost-summary-label",children:"Total Project Estimate"}),e.jsx("span",{className:"cost-summary-value",children:u(o.grandTotal)})]}),e.jsxs("div",{className:"cost-summary-item",children:[e.jsx("span",{className:"cost-summary-label",children:"Storm Infrastructure"}),e.jsx("span",{className:"cost-summary-value",children:u(o.infraTotal)})]}),e.jsxs("div",{className:"cost-summary-item",children:[e.jsx("span",{className:"cost-summary-label",children:"LID Features"}),e.jsx("span",{className:"cost-summary-value",children:u(o.lidTotal)})]}),e.jsxs("div",{className:"cost-summary-item",children:[e.jsx("span",{className:"cost-summary-label",children:"Engineering (15%)"}),e.jsx("span",{className:"cost-summary-value",children:u(o.engineering)})]}),e.jsxs("div",{className:"cost-summary-item",children:[e.jsx("span",{className:"cost-summary-label",children:"Contingency (10%)"}),e.jsx("span",{className:"cost-summary-value",children:u(o.contingency)})]})]})]}),e.jsxs("div",{className:"sim-chart-card",children:[e.jsx("h4",{children:"Detailed Cost Breakdown"}),e.jsxs("table",{className:"cost-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Item"}),e.jsx("th",{children:"Description"}),e.jsx("th",{children:"Qty"}),e.jsx("th",{children:"Unit Cost"}),e.jsx("th",{children:"Total"})]})}),e.jsxs("tbody",{children:[e.jsx("tr",{className:"cost-row-header",children:e.jsx("td",{colSpan:5,children:"Storm Pipe Infrastructure"})}),e.jsxs("tr",{children:[e.jsx("td",{children:"Storm Pipe"}),e.jsxs("td",{children:[o.pipe.dia," mm ",Cr[o.pipe.material]]}),e.jsxs("td",{children:[o.pipe.length," m"]}),e.jsxs("td",{children:[u(o.pipe.unitCost),"/m"]}),e.jsx("td",{children:u(o.pipe.cost)})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"Catch Basins"}),e.jsx("td",{children:"Standard CB w/ grate"}),e.jsxs("td",{children:[o.catchBasins.count," ea"]}),e.jsxs("td",{children:[u(o.catchBasins.unitCost),"/ea"]}),e.jsx("td",{children:u(o.catchBasins.cost)})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"Manholes"}),e.jsx("td",{children:"Standard MH"}),e.jsxs("td",{children:[o.manholes.count," ea"]}),e.jsxs("td",{children:[u(o.manholes.unitCost),"/ea"]}),e.jsx("td",{children:u(o.manholes.cost)})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"Excavation"}),e.jsxs("td",{children:["Trench ",o.excavation.depth.toFixed(1),"m deep × ",o.excavation.width.toFixed(2),"m wide"]}),e.jsxs("td",{children:[o.excavation.vol.toFixed(1)," m³"]}),e.jsxs("td",{children:[u(ge),"/m³"]}),e.jsx("td",{children:u(o.excavation.cost)})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"Backfill"}),e.jsx("td",{children:"Granular bedding & backfill"}),e.jsxs("td",{children:[o.backfill.vol.toFixed(1)," m³"]}),e.jsxs("td",{children:[u(xe),"/m³"]}),e.jsx("td",{children:u(o.backfill.cost)})]}),o.lidTotal>0&&e.jsxs(e.Fragment,{children:[e.jsx("tr",{className:"cost-row-header",children:e.jsx("td",{colSpan:5,children:"Low Impact Development (LID)"})}),o.lid.greenRoof.cost>0&&e.jsxs("tr",{children:[e.jsx("td",{children:"Green Roof"}),e.jsx("td",{children:"Extensive sedum system"}),e.jsxs("td",{children:[o.lid.greenRoof.area.toFixed(0)," m²"]}),e.jsxs("td",{children:[u(je),"/m²"]}),e.jsx("td",{children:u(o.lid.greenRoof.cost)})]}),o.lid.rainGarden.cost>0&&e.jsxs("tr",{children:[e.jsx("td",{children:"Rain Garden"}),e.jsx("td",{children:"Bioretention cell"}),e.jsxs("td",{children:[o.lid.rainGarden.area.toFixed(0)," m²"]}),e.jsxs("td",{children:[u(be),"/m²"]}),e.jsx("td",{children:u(o.lid.rainGarden.cost)})]}),o.lid.permPave.cost>0&&e.jsxs("tr",{children:[e.jsx("td",{children:"Permeable Pavement"}),e.jsx("td",{children:"Interlocking concrete pavers"}),e.jsxs("td",{children:[o.lid.permPave.area.toFixed(0)," m²"]}),e.jsxs("td",{children:[u(ye),"/m²"]}),e.jsx("td",{children:u(o.lid.permPave.cost)})]}),o.lid.bioswale.cost>0&&e.jsxs("tr",{children:[e.jsx("td",{children:"Bio-swale"}),e.jsx("td",{children:"Vegetated channel"}),e.jsxs("td",{children:[o.lid.bioswale.len.toFixed(0)," m"]}),e.jsxs("td",{children:[u(Pe),"/m"]}),e.jsx("td",{children:u(o.lid.bioswale.cost)})]})]}),e.jsx("tr",{className:"cost-row-header",children:e.jsx("td",{colSpan:5,children:"Professional Services & Contingency"})}),e.jsxs("tr",{children:[e.jsx("td",{children:"Engineering"}),e.jsx("td",{children:"Design, permitting, inspection"}),e.jsx("td",{children:"15%"}),e.jsx("td",{children:"-"}),e.jsx("td",{children:u(o.engineering)})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"Contingency"}),e.jsx("td",{children:"Unforeseen conditions"}),e.jsx("td",{children:"10%"}),e.jsx("td",{children:"-"}),e.jsx("td",{children:u(o.contingency)})]}),e.jsxs("tr",{className:"cost-row-total",children:[e.jsx("td",{colSpan:4,children:"GRAND TOTAL"}),e.jsx("td",{children:u(o.grandTotal)})]})]})]})]}),e.jsxs("div",{className:"sim-chart-card",children:[e.jsx("h4",{children:"Cost Breakdown by Item"}),e.jsx(ea,{width:"100%",height:220,children:e.jsxs(At,{data:Pa,layout:"vertical",margin:{left:100},children:[e.jsx(Nt,{strokeDasharray:"3 3",stroke:"rgba(57,211,83,0.12)"}),e.jsx(Ct,{type:"number",stroke:"rgba(57,211,83,0.4)",tick:{fontSize:9,fill:"rgba(57,211,83,0.5)"},tickFormatter:l=>`$${(l/1e3).toFixed(0)}k`}),e.jsx(Et,{dataKey:"name",type:"category",stroke:"rgba(57,211,83,0.4)",tick:{fontSize:10,fill:"rgba(57,211,83,0.6)"},width:95}),e.jsx(aa,{contentStyle:_e,formatter:l=>[u(l??0)]}),e.jsx(St,{dataKey:"cost",fill:"#39d353",radius:[0,3,3,0]})]})})]}),e.jsxs("div",{className:"sim-chart-card",children:[e.jsx("h4",{children:"Cost Distribution"}),e.jsx(ea,{width:"100%",height:200,children:e.jsxs(Nr,{children:[e.jsx(ba,{data:ke,cx:"50%",cy:"50%",outerRadius:70,dataKey:"value",label:({name:l,percent:w})=>`${l??""} (${((w??0)*100).toFixed(0)}%)`,children:ke.map((l,w)=>e.jsx(Oe,{fill:Te[w%Te.length]},w))}),e.jsx(aa,{contentStyle:_e,formatter:l=>[u(l??0)]}),e.jsx(wt,{wrapperStyle:{fontSize:10}})]})})]}),e.jsxs("div",{className:"sim-chart-card",children:[e.jsx("h4",{children:"Pipe Cost Reference (Installed, CAD/m)"}),e.jsxs("table",{className:"cost-table cost-ref-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Diameter (mm)"}),e.jsx("th",{children:"PVC"}),e.jsx("th",{children:"HDPE"}),e.jsx("th",{children:"Concrete"})]})}),e.jsx("tbody",{children:oa.map(l=>e.jsxs("tr",{className:_&&l.dia_mm===_.pipe_mm?"cost-row-active":"",children:[e.jsx("td",{children:l.dia_mm}),e.jsx("td",{children:l.pvc>0?u(l.pvc):"-"}),e.jsx("td",{children:l.hdpe>0?u(l.hdpe):"-"}),e.jsx("td",{children:l.concrete>0?u(l.concrete):"-"})]},l.dia_mm))})]}),e.jsxs("p",{className:"dc-note",style:{marginTop:8},children:["Highlighted row: required pipe size based on ",t,"-year design storm.",e.jsx("strong",{children:"Pipe catalogue rates are defaults"})," — no verified public source. Edit unit rates in the sidebar to use your own data."]})]})]}):e.jsx("div",{className:"precip-overlay-loading",style:{flex:1},children:"Search or enter a property to calculate costs"})]})})]})}export{Lr as default};
