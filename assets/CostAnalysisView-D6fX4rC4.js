import{a as i,j as e,d as Ca}from"./index-CMn6XrNp.js";import{u as Sa,S as Ea,a as wa}from"./SiteInputPanel-BWc_Zz0Q.js";import{q as S,aq as ae,ar as Ia,as as Da,at as H,au as Oa,av as Ra,aw as da,ax as Ma,ay as ka,o as K,az as Ta,aA as _a,aB as La,aC as Fa,t as ma,aD as Ba,aE as Ga,aF as Ka,aG as $a,aH as ua,aI as za,aJ as Ua,aK as Va,Q as pa,aL as Wa,r as Ie,m as ha,M as Ha,aM as qa,J as va,aN as fa,f as J,aO as Qa,h as De,j as Z,a1 as ga,aP as Oe,U as Xa,a4 as Ya,a6 as Za,aQ as Ja,a7 as Ze,i as Je,aR as de,aS as et,ak as at,aT as tt,aU as rt,aV as st,aW as nt,aX as it,aY as lt,aZ as ot,a_ as ct,ap as dt,aa as mt,a$ as ut,b0 as ee,b1 as Ee,am as ea,ad as pt,b2 as ht,n as vt,u as ft,b3 as gt,b4 as xt,b5 as jt,b6 as bt,b7 as yt,b8 as Pt,ah as At,R as aa,B as Nt,C as Ct,X as St,Y as Et,T as ta,a as wt,L as It}from"./BarChart-CLusXOrz.js";import"./with-selector-CCN2u3Ig.js";var xa=a=>a.graphicalItems.polarItems,Dt=S([ae,Ia],Da),me=S([xa,H,Dt],Oa),Ot=S([me],Ra),ue=S([Ot,da],Ma),Rt=S([ue,H,me],ka);S([ue,H,me],(a,t,s)=>s.length>0?a.flatMap(r=>s.flatMap(n=>{var c,m=K(r,(c=t.dataKey)!==null&&c!==void 0?c:n.dataKey);return{value:m,errorDomain:[]}})).filter(Boolean):t?.dataKey!=null?a.map(r=>({value:K(r,t.dataKey),errorDomain:[]})):a.map(r=>({value:r,errorDomain:[]})));var ra=()=>{},Mt=S([ue,H,me,Ta,ae],_a),kt=S([H,La,Fa,ra,Mt,ra,ma,ae],Ba),ja=S([H,ma,ue,Rt,Ga,ae,kt],Ka),Tt=S([ja,$a,ua],za),_t=S([H,ja,Tt,ae],Ua);S([ua,_t],Va);function sa(a,t){var s=Object.keys(a);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(a);t&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(a,n).enumerable})),s.push.apply(s,r)}return s}function na(a){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?sa(Object(s),!0).forEach(function(r){Lt(a,r,s[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(s)):sa(Object(s)).forEach(function(r){Object.defineProperty(a,r,Object.getOwnPropertyDescriptor(s,r))})}return a}function Lt(a,t,s){return(t=Ft(t))in a?Object.defineProperty(a,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):a[t]=s,a}function Ft(a){var t=Bt(a,"string");return typeof t=="symbol"?t:t+""}function Bt(a,t){if(typeof a!="object"||!a)return a;var s=a[Symbol.toPrimitive];if(s!==void 0){var r=s.call(a,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(a)}var Gt=(a,t)=>t,Re=S([xa,Gt],(a,t)=>a.filter(s=>s.type==="pie").find(s=>s.id===t)),Kt=[],Me=(a,t,s)=>s?.length===0?Kt:s,ba=S([da,Re,Me],(a,t,s)=>{var{chartData:r}=a;if(t!=null){var n;if(t?.data!=null&&t.data.length>0?n=t.data:n=r,(!n||!n.length)&&s!=null&&(n=s.map(c=>na(na({},t.presentationProps),c.props))),n!=null)return n}}),$t=S([ba,Re,Me],(a,t,s)=>{if(!(a==null||t==null))return a.map((r,n)=>{var c,m=K(r,t.nameKey,t.name),p;return s!=null&&(c=s[n])!==null&&c!==void 0&&(c=c.props)!==null&&c!==void 0&&c.fill?p=s[n].props.fill:typeof r=="object"&&r!=null&&"fill"in r?p=r.fill:p=t.fill,{value:pa(m,t.dataKey),color:p,payload:r,type:t.legendType}})}),zt=S([ba,Re,Me,Wa],(a,t,s,r)=>{if(!(t==null||a==null))return cr({offset:r,pieSettings:t,displayedData:a,cells:s})}),Ut=["key"],Vt=["onMouseEnter","onClick","onMouseLeave"],Wt=["id"],Ht=["id"];function ia(a,t){var s=Object.keys(a);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(a);t&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(a,n).enumerable})),s.push.apply(s,r)}return s}function f(a){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?ia(Object(s),!0).forEach(function(r){qt(a,r,s[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(s)):ia(Object(s)).forEach(function(r){Object.defineProperty(a,r,Object.getOwnPropertyDescriptor(s,r))})}return a}function qt(a,t,s){return(t=Qt(t))in a?Object.defineProperty(a,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):a[t]=s,a}function Qt(a){var t=Xt(a,"string");return typeof t=="symbol"?t:t+""}function Xt(a,t){if(typeof a!="object"||!a)return a;var s=a[Symbol.toPrimitive];if(s!==void 0){var r=s.call(a,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(a)}function $(){return $=Object.assign?Object.assign.bind():function(a){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)({}).hasOwnProperty.call(s,r)&&(a[r]=s[r])}return a},$.apply(null,arguments)}function pe(a,t){if(a==null)return{};var s,r,n=Yt(a,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(a);for(r=0;r<c.length;r++)s=c[r],t.indexOf(s)===-1&&{}.propertyIsEnumerable.call(a,s)&&(n[s]=a[s])}return n}function Yt(a,t){if(a==null)return{};var s={};for(var r in a)if({}.hasOwnProperty.call(a,r)){if(t.indexOf(r)!==-1)continue;s[r]=a[r]}return s}function Zt(a){var t=i.useMemo(()=>fa(a.children,Oe),[a.children]),s=J(r=>$t(r,a.id,t));return s==null?null:i.createElement(Qa,{legendPayload:s})}var Jt=i.memo(a=>{var{dataKey:t,nameKey:s,sectors:r,stroke:n,strokeWidth:c,fill:m,name:p,hide:j,tooltipType:v,id:y}=a,b={dataDefinedOnItem:r.map(d=>d.tooltipPayload),getPosition:d=>{var g;return(g=r[Number(d)])===null||g===void 0?void 0:g.tooltipPosition},settings:{stroke:n,strokeWidth:c,fill:m,dataKey:t,nameKey:s,name:pa(p,t),hide:j,type:v,color:m,unit:"",graphicalItemId:y}};return i.createElement(Xa,{tooltipEntrySettings:b})}),er=(a,t)=>a>t?"start":a<t?"end":"middle",ar=(a,t,s)=>typeof t=="function"?ee(t(a),s,s*.8):ee(t,s,s*.8),tr=(a,t,s)=>{var{top:r,left:n,width:c,height:m}=t,p=ut(c,m),j=n+ee(a.cx,c,c/2),v=r+ee(a.cy,m,m/2),y=ee(a.innerRadius,p,0),b=ar(s,a.outerRadius,p),d=a.maxRadius||Math.sqrt(c*c+m*m)/2;return{cx:j,cy:v,innerRadius:y,outerRadius:b,maxRadius:d}},rr=(a,t)=>{var s=de(t-a),r=Math.min(Math.abs(t-a),360);return s*r},sr=(a,t)=>{if(i.isValidElement(a))return i.cloneElement(a,t);if(typeof a=="function")return a(t);var s=De("recharts-pie-label-line",typeof a!="boolean"?a.className:""),{key:r}=t,n=pe(t,Ut);return i.createElement(pt,$({},n,{type:"linear",className:s}))},nr=(a,t,s)=>{if(i.isValidElement(a))return i.cloneElement(a,t);var r=s;if(typeof a=="function"&&(r=a(t),i.isValidElement(r)))return r;var n=De("recharts-pie-label-text",ht(a));return i.createElement(vt,$({},t,{alignmentBaseline:"middle",className:n}),r)};function ir(a){var{sectors:t,props:s,showLabels:r}=a,{label:n,labelLine:c,dataKey:m}=s;if(!r||!n||!t)return null;var p=ha(s),j=ea(n),v=ea(c),y=typeof n=="object"&&"offsetRadius"in n&&typeof n.offsetRadius=="number"&&n.offsetRadius||20,b=t.map((d,g)=>{var D=(d.startAngle+d.endAngle)/2,N=Ee(d.cx,d.cy,d.outerRadius+y,D),O=f(f(f(f({},p),d),{},{stroke:"none"},j),{},{index:g,textAnchor:er(N.x,d.cx)},N),h=f(f(f(f({},p),d),{},{fill:"none",stroke:d.fill},v),{},{index:g,points:[Ee(d.cx,d.cy,d.outerRadius,D),N],key:"line"});return i.createElement(ga,{zIndex:va.label,key:"label-".concat(d.startAngle,"-").concat(d.endAngle,"-").concat(d.midAngle,"-").concat(g)},i.createElement(Z,null,c&&sr(c,h),nr(n,O,K(d,m))))});return i.createElement(Z,{className:"recharts-pie-labels"},b)}function lr(a){var{sectors:t,props:s,showLabels:r}=a,{label:n}=s;return typeof n=="object"&&n!=null&&"position"in n?i.createElement(mt,{label:n}):i.createElement(ir,{sectors:t,props:s,showLabels:r})}function or(a){var{sectors:t,activeShape:s,inactiveShape:r,allOtherPieProps:n,shape:c,id:m}=a,p=J(at),j=J(tt),v=J(rt),{onMouseEnter:y,onClick:b,onMouseLeave:d}=n,g=pe(n,Vt),D=st(y,n.dataKey,m),N=nt(d),O=it(b,n.dataKey,m);return t==null||t.length===0?null:i.createElement(i.Fragment,null,t.map((h,E)=>{if(h?.startAngle===0&&h?.endAngle===0&&t.length!==1)return null;var k=v==null||v===m,R=String(E)===p&&(j==null||n.dataKey===j)&&k,I=p?r:null,C=s&&R?s:I,P=f(f({},h),{},{stroke:h.stroke,tabIndex:-1,[ot]:E,[lt]:m});return i.createElement(Z,$({key:"sector-".concat(h?.startAngle,"-").concat(h?.endAngle,"-").concat(h.midAngle,"-").concat(E),tabIndex:-1,className:"recharts-pie-sector"},ct(g,h,E),{onMouseEnter:D(h,E),onMouseLeave:N(h,E),onClick:O(h,E)}),i.createElement(dt,$({option:c??C,index:E,shapeType:"sector",isActive:R},P)))}))}function cr(a){var t,{pieSettings:s,displayedData:r,cells:n,offset:c}=a,{cornerRadius:m,startAngle:p,endAngle:j,dataKey:v,nameKey:y,tooltipType:b}=s,d=Math.abs(s.minAngle),g=rr(p,j),D=Math.abs(g),N=r.length<=1?0:(t=s.paddingAngle)!==null&&t!==void 0?t:0,O=r.filter(C=>K(C,v,0)!==0).length,h=(D>=360?O:O-1)*N,E=D-O*d-h,k=r.reduce((C,P)=>{var A=K(P,v,0);return C+(Je(A)?A:0)},0),R;if(k>0){var I;R=r.map((C,P)=>{var A=K(C,v,0),G=K(C,y,P),M=tr(s,c,C),T=(Je(A)?A:0)/k,L,F=f(f({},C),n&&n[P]&&n[P].props);P?L=I.endAngle+de(g)*N*(A!==0?1:0):L=p;var q=L+de(g)*((A!==0?d:0)+T*E),z=(L+q)/2,Q=(M.innerRadius+M.outerRadius)/2,U=[{name:G,value:A,payload:F,dataKey:v,type:b,graphicalItemId:s.id}],he=Ee(M.cx,M.cy,Q,z);return I=f(f(f(f({},s.presentationProps),{},{percent:T,cornerRadius:typeof m=="string"?parseFloat(m):m,name:G,tooltipPayload:U,midAngle:z,middleRadius:Q,tooltipPosition:he},F),M),{},{value:A,dataKey:v,startAngle:L,endAngle:q,payload:F,paddingAngle:de(g)*N}),I})}return R}function dr(a){var{showLabels:t,sectors:s,children:r}=a,n=i.useMemo(()=>!t||!s?[]:s.map(c=>({value:c.value,payload:c.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:c.cx,cy:c.cy,innerRadius:c.innerRadius,outerRadius:c.outerRadius,startAngle:c.startAngle,endAngle:c.endAngle,clockWise:!1},fill:c.fill})),[s,t]);return i.createElement(et,{value:t?n:void 0},r)}function mr(a){var{props:t,previousSectorsRef:s,id:r}=a,{sectors:n,isAnimationActive:c,animationBegin:m,animationDuration:p,animationEasing:j,activeShape:v,inactiveShape:y,onAnimationStart:b,onAnimationEnd:d}=t,g=Ya(t,"recharts-pie-"),D=s.current,[N,O]=i.useState(!1),h=i.useCallback(()=>{typeof d=="function"&&d(),O(!1)},[d]),E=i.useCallback(()=>{typeof b=="function"&&b(),O(!0)},[b]);return i.createElement(dr,{showLabels:!N,sectors:n},i.createElement(Za,{animationId:g,begin:m,duration:p,isActive:c,easing:j,onAnimationStart:E,onAnimationEnd:h,key:g},k=>{var R,I=[],C=n&&n[0],P=(R=C?.startAngle)!==null&&R!==void 0?R:0;return n?.forEach((A,G)=>{var M=D&&D[G],T=G>0?Ja(A,"paddingAngle",0):0;if(M){var L=Ze(M.endAngle-M.startAngle,A.endAngle-A.startAngle,k),F=f(f({},A),{},{startAngle:P+T,endAngle:P+L+T});I.push(F),P=F.endAngle}else{var{endAngle:q,startAngle:z}=A,Q=Ze(0,q-z,k),U=f(f({},A),{},{startAngle:P+T,endAngle:P+Q+T});I.push(U),P=U.endAngle}}),s.current=I,i.createElement(Z,null,i.createElement(or,{sectors:I,activeShape:v,inactiveShape:y,allOtherPieProps:t,shape:t.shape,id:r}))}),i.createElement(lr,{showLabels:!N,sectors:n,props:t}),t.children)}var ur={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:"auto",label:!1,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff",zIndex:va.area};function pr(a){var{id:t}=a,s=pe(a,Wt),{hide:r,className:n,rootTabIndex:c}=a,m=i.useMemo(()=>fa(a.children,Oe),[a.children]),p=J(y=>zt(y,t,m)),j=i.useRef(null),v=De("recharts-pie",n);return r||p==null?(j.current=null,i.createElement(Z,{tabIndex:c,className:v})):i.createElement(ga,{zIndex:a.zIndex},i.createElement(Jt,{dataKey:a.dataKey,nameKey:a.nameKey,sectors:p,stroke:a.stroke,strokeWidth:a.strokeWidth,fill:a.fill,name:a.name,hide:a.hide,tooltipType:a.tooltipType,id:t}),i.createElement(Z,{tabIndex:c,className:v},i.createElement(mr,{props:f(f({},s),{},{sectors:p}),previousSectorsRef:j,id:t})))}function ya(a){var t=Ie(a,ur),{id:s}=t,r=pe(t,Ht),n=ha(r);return i.createElement(Ha,{id:s,type:"pie"},c=>i.createElement(i.Fragment,null,i.createElement(qa,{type:"pie",id:c,data:r.data,dataKey:r.dataKey,hide:r.hide,angleAxisId:0,radiusAxisId:0,name:r.name,nameKey:r.nameKey,tooltipType:r.tooltipType,legendType:r.legendType,fill:r.fill,cx:r.cx,cy:r.cy,startAngle:r.startAngle,endAngle:r.endAngle,paddingAngle:r.paddingAngle,minAngle:r.minAngle,innerRadius:r.innerRadius,outerRadius:r.outerRadius,cornerRadius:r.cornerRadius,presentationProps:n,maxRadius:t.maxRadius}),i.createElement(Zt,$({},r,{id:c})),i.createElement(pr,$({},r,{id:c}))))}ya.displayName="Pie";function hr(a){var t=ft();return i.useEffect(()=>{t(gt(a))},[t,a]),null}var vr=["layout"];function we(){return we=Object.assign?Object.assign.bind():function(a){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)({}).hasOwnProperty.call(s,r)&&(a[r]=s[r])}return a},we.apply(null,arguments)}function fr(a,t){if(a==null)return{};var s,r,n=gr(a,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(a);for(r=0;r<c.length;r++)s=c[r],t.indexOf(s)===-1&&{}.propertyIsEnumerable.call(a,s)&&(n[s]=a[s])}return n}function gr(a,t){if(a==null)return{};var s={};for(var r in a)if({}.hasOwnProperty.call(a,r)){if(t.indexOf(r)!==-1)continue;s[r]=a[r]}return s}var xr={top:5,right:5,bottom:5,left:5},Pa={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:xr,reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},jr=i.forwardRef(function(t,s){var r,n=Ie(t.categoricalChartProps,Pa),{layout:c}=n,m=fr(n,vr),{chartName:p,defaultTooltipEventType:j,validateTooltipEventTypes:v,tooltipPayloadSearcher:y}=t,b={chartName:p,defaultTooltipEventType:j,validateTooltipEventTypes:v,tooltipPayloadSearcher:y,eventEmitter:void 0};return i.createElement(xt,{preloadedState:{options:b},reduxStoreName:(r=n.id)!==null&&r!==void 0?r:p},i.createElement(jt,{chartData:n.data}),i.createElement(bt,{layout:c,margin:n.margin}),i.createElement(yt,{baseValue:void 0,accessibilityLayer:n.accessibilityLayer,barCategoryGap:n.barCategoryGap,maxBarSize:n.maxBarSize,stackOffset:n.stackOffset,barGap:n.barGap,barSize:n.barSize,syncId:n.syncId,syncMethod:n.syncMethod,className:n.className,reverseStackOrder:n.reverseStackOrder}),i.createElement(hr,{cx:n.cx,cy:n.cy,startAngle:n.startAngle,endAngle:n.endAngle,innerRadius:n.innerRadius,outerRadius:n.outerRadius}),i.createElement(Pt,we({},m,{ref:s})))});function la(a,t){var s=Object.keys(a);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(a);t&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(a,n).enumerable})),s.push.apply(s,r)}return s}function oa(a){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?la(Object(s),!0).forEach(function(r){br(a,r,s[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(s)):la(Object(s)).forEach(function(r){Object.defineProperty(a,r,Object.getOwnPropertyDescriptor(s,r))})}return a}function br(a,t,s){return(t=yr(t))in a?Object.defineProperty(a,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):a[t]=s,a}function yr(a){var t=Pr(a,"string");return typeof t=="symbol"?t:t+""}function Pr(a,t){if(typeof a!="object"||!a)return a;var s=a[Symbol.toPrimitive];if(s!==void 0){var r=s.call(a,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(a)}var Ar=["item"],Nr=oa(oa({},Pa),{},{layout:"centric",startAngle:0,endAngle:360}),Cr=i.forwardRef((a,t)=>{var s=Ie(a,Nr);return i.createElement(jr,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:Ar,tooltipPayloadSearcher:At,categoricalChartProps:s,ref:t})});const ca=[{dia_mm:100,pvc:95,hdpe:110,concrete:0},{dia_mm:150,pvc:125,hdpe:140,concrete:0},{dia_mm:200,pvc:160,hdpe:175,concrete:195},{dia_mm:250,pvc:195,hdpe:215,concrete:240},{dia_mm:300,pvc:240,hdpe:265,concrete:285},{dia_mm:375,pvc:300,hdpe:330,concrete:355},{dia_mm:450,pvc:420,hdpe:460,concrete:430},{dia_mm:525,pvc:0,hdpe:560,concrete:520},{dia_mm:600,pvc:0,hdpe:650,concrete:600},{dia_mm:750,pvc:0,hdpe:0,concrete:780},{dia_mm:900,pvc:0,hdpe:0,concrete:980},{dia_mm:1050,pvc:0,hdpe:0,concrete:1250},{dia_mm:1200,pvc:0,hdpe:0,concrete:1500}],Sr={pvc:"PVC (Polyvinyl Chloride)",hdpe:"HDPE (High-Density Polyethylene)",concrete:"Reinforced Concrete"},Er=.15,wr=.1,Ir=[2,5,10,25,50,100],Dr={2:{5:82,10:56,15:45,30:30,60:18,120:11,360:5,720:3,1440:1.7},5:{5:110,10:76,15:61,30:41,60:25,120:15,360:6.8,720:4,1440:2.3},10:{5:128,10:89,15:72,30:48,60:29,120:18,360:8,720:4.7,1440:2.7},25:{5:153,10:107,15:86,30:58,60:35,120:21,360:9.6,720:5.6,1440:3.3},50:{5:172,10:121,15:97,30:66,60:40,120:24,360:11,720:6.4,1440:3.7},100:{5:192,10:135,15:109,30:74,60:44,120:27,360:12,720:7.2,1440:4.2}};function Or(a,t){const s=Dr[a];if(!s)return 0;const r=Object.keys(s).map(Number).sort((n,c)=>n-c);if(t<=r[0])return s[r[0]];if(t>=r[r.length-1])return s[r[r.length-1]];for(let n=0;n<r.length-1;n++)if(t>=r[n]&&t<=r[n+1]){const c=(Math.log(t)-Math.log(r[n]))/(Math.log(r[n+1])-Math.log(r[n]));return Math.exp(Math.log(s[r[n]])+c*(Math.log(s[r[n+1]])-Math.log(s[r[n]])))}return 0}const Se=[100,150,200,250,300,375,450,525,600,750,900,1050,1200];function Rr(a){const r=a*.013/Math.sqrt(.005);return Math.pow(r*Math.pow(4,2/3)/Math.PI,3/8)*2*1e3}function Mr(a){return Se.find(t=>t>=a)??Se[Se.length-1]}function Fr(){const a=Sa(),[t,s]=i.useState(100),[r,n]=i.useState("pvc"),[c,m]=i.useState(""),[p,j]=i.useState(""),[v,y]=i.useState(""),[b,d]=i.useState(!1),[g,D]=i.useState(!1),[N,O]=i.useState(!1),[h,E]=i.useState(!1),[k,R]=i.useState("3500"),[I,C]=i.useState("6000"),[P,A]=i.useState("22"),[G,M]=i.useState("15"),[T,L]=i.useState("250"),[F,q]=i.useState("175"),[z,Q]=i.useState("140"),[U,he]=i.useState("110"),ve=parseFloat(k)||0,fe=parseFloat(I)||0,ge=parseFloat(P)||0,xe=parseFloat(G)||0,je=parseFloat(T)||0,be=parseFloat(F)||0,ye=parseFloat(z)||0,Pe=parseFloat(U)||0,x=a.analysisData?.lotSize??0,B=a.analysisData?.buildingArea??0,te=a.analysisData?.zoningPaveFrac??.15;i.useEffect(()=>{if(x<=0)return;const l=Math.sqrt(x),w=Math.round(l*.6+3);m(String(w));const V=B+x*te,X=Math.max(1,Math.ceil(V/400));j(String(X));const W=Math.max(1,Math.ceil(w/90));y(String(W))},[x,B,te]);const re=parseFloat(c)||0,Ae=parseInt(p)||0,Ne=parseInt(v)||0,_=i.useMemo(()=>{if(x<=0)return null;const l=x*te,w=Math.max(0,x-B-l),V=(B*.95+l*.9+w*.3)/x,X=.0195*Math.pow(Math.sqrt(x),.77)/Math.pow(.005,.385),W=Math.min(30,Math.max(5,X)),Y=Or(t,W),se=V*Y*(x/1e4)/360,ne=Rr(se),ie=Mr(ne);return{C:V,tc:W,i:Y,Q:se,pipe_mm:ie}},[x,B,t,te]),o=i.useMemo(()=>{if(!_)return null;const l=ca.find(ce=>ce.dia_mm>=_.pipe_mm);if(!l)return null;let w=l[r];if(w===0){const ce=["pvc","hdpe","concrete"].filter(Na=>l[Na]>0);w=ce.length>0?l[ce[0]]:500}const V=w*re,X=Ae*ve,W=Ne*fe,Y=l.dia_mm/1e3,se=2.4,ne=.15,ie=Math.max(se+Y+ne,2.1+Y+ne),Fe=Math.max(.6,Y+.45),le=ie*Fe*re,Be=le*ge,Ge=le*xe,Ke=b?B*.5:0,$e=g?x*.05:0,ze=N?x*.15:0,Ue=h?Math.sqrt(x)*.5:0,Ve=Ke*je,We=$e*be,He=ze*ye,qe=Ue*Pe,Ce=Ve+We+He+qe,Qe=V+X+W+Be+Ge,oe=Qe+Ce,Xe=oe*Er,Ye=oe*wr,Aa=oe+Xe+Ye;return{pipe:{dia:l.dia_mm,material:r,unitCost:w,length:re,cost:V},catchBasins:{count:Ae,unitCost:ve,cost:X},manholes:{count:Ne,unitCost:fe,cost:W},excavation:{vol:le,cost:Be,depth:ie,width:Fe},backfill:{vol:le,cost:Ge},lid:{greenRoof:{area:Ke,cost:Ve},rainGarden:{area:$e,cost:We},permPave:{area:ze,cost:He},bioswale:{len:Ue,cost:qe},total:Ce},infraTotal:Qe,lidTotal:Ce,subtotal:oe,engineering:Xe,contingency:Ye,grandTotal:Aa}},[_,r,re,Ae,Ne,b,g,N,h,x,B,ve,fe,ge,xe,je,be,ye,Pe]),ke=i.useMemo(()=>o?[{name:"Storm Pipe",cost:o.pipe.cost},{name:"Catch Basins",cost:o.catchBasins.cost},{name:"Manholes",cost:o.manholes.cost},{name:"Excavation",cost:o.excavation.cost},{name:"Backfill",cost:o.backfill.cost},...o.lid.greenRoof.cost>0?[{name:"Green Roof",cost:o.lid.greenRoof.cost}]:[],...o.lid.rainGarden.cost>0?[{name:"Rain Garden",cost:o.lid.rainGarden.cost}]:[],...o.lid.permPave.cost>0?[{name:"Perm. Pave",cost:o.lid.permPave.cost}]:[],...o.lid.bioswale.cost>0?[{name:"Bio-swale",cost:o.lid.bioswale.cost}]:[],{name:"Engineering (15%)",cost:o.engineering},{name:"Contingency (10%)",cost:o.contingency}]:[],[o]),Te=i.useMemo(()=>o?[{name:"Storm Infrastructure",value:o.infraTotal},{name:"LID Features",value:o.lidTotal},{name:"Eng. & Contingency",value:o.engineering+o.contingency}].filter(l=>l.value>0):[],[o]),_e=["#3b82f6","#22c55e","#f59e0b","#ef4444"],Le={background:"#0a150a",border:"1px solid rgba(57,211,83,0.35)",borderRadius:2,color:"#39d353",fontSize:11,fontFamily:"'Share Tech Mono', monospace"},u=l=>"$"+l.toLocaleString("en-CA",{minimumFractionDigits:0,maximumFractionDigits:0});return e.jsxs("div",{className:"precip-view",children:[e.jsxs("div",{className:"precip-sidebar eng-sidebar",children:[e.jsxs("div",{className:"precip-sidebar-header",children:[e.jsx("h2",{children:"Cost Analysis"}),e.jsx("p",{className:"precip-subtitle",children:"Stormwater Infrastructure · LID Features"})]}),e.jsx(Ea,{...a}),a.analysisData&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"precip-section",children:[e.jsx("label",{className:"precip-label",children:"Pipe Infrastructure"}),e.jsxs("div",{className:"eng-manual-form",children:[e.jsxs("div",{className:"eng-field",children:[e.jsx("label",{className:"eng-field-label",children:"Design Return Period"}),e.jsx("select",{className:"dc-select",style:{width:"100%"},value:t,onChange:l=>s(+l.target.value),children:Ir.map(l=>e.jsxs("option",{value:l,children:[l,"-year"]},l))})]}),e.jsxs("div",{className:"eng-field",children:[e.jsx("label",{className:"eng-field-label",children:"Pipe Material"}),e.jsxs("select",{className:"dc-select",style:{width:"100%"},value:r,onChange:l=>n(l.target.value),children:[e.jsx("option",{value:"pvc",children:"PVC"}),e.jsx("option",{value:"hdpe",children:"HDPE"}),e.jsx("option",{value:"concrete",children:"Reinforced Concrete"})]})]}),e.jsxs("div",{className:"eng-field",children:[e.jsx("label",{className:"eng-field-label",children:"Pipe Run Length (m)"}),e.jsx("input",{type:"number",className:"prop-input",value:c,onChange:l=>m(l.target.value),min:"1"}),e.jsx("span",{style:{fontSize:9,opacity:.5,marginTop:2,display:"block"},children:"Auto-estimated from lot (≈ 60% of side length + 3m connection)"})]}),e.jsxs("div",{className:"eng-field",children:[e.jsx("label",{className:"eng-field-label",children:"Catch Basins"}),e.jsx("input",{type:"number",className:"prop-input",value:p,onChange:l=>j(l.target.value),min:"0"})]}),e.jsxs("div",{className:"eng-field",children:[e.jsx("label",{className:"eng-field-label",children:"Manholes"}),e.jsx("input",{type:"number",className:"prop-input",value:v,onChange:l=>y(l.target.value),min:"0"})]})]})]}),e.jsxs("div",{className:"precip-section",children:[e.jsxs("label",{className:"precip-label",children:["Unit Rates (CAD) ",e.jsx("span",{style:{fontSize:9,opacity:.5},children:"— enter your own"})]}),e.jsx("p",{style:{fontSize:9,opacity:.5,margin:"0 0 6px"},children:"No verified public source found. Defaults are placeholders — replace with actual quotes."}),e.jsxs("div",{className:"eng-manual-form",style:{gap:4},children:[e.jsxs("div",{className:"eng-field",children:[e.jsx("label",{className:"eng-field-label",children:"Catch Basin ($/ea)"}),e.jsx("input",{type:"number",className:"prop-input",value:k,onChange:l=>R(l.target.value),min:"0"})]}),e.jsxs("div",{className:"eng-field",children:[e.jsx("label",{className:"eng-field-label",children:"Manhole ($/ea)"}),e.jsx("input",{type:"number",className:"prop-input",value:I,onChange:l=>C(l.target.value),min:"0"})]}),e.jsxs("div",{className:"eng-field",children:[e.jsx("label",{className:"eng-field-label",children:"Excavation ($/m³)"}),e.jsx("input",{type:"number",className:"prop-input",value:P,onChange:l=>A(l.target.value),min:"0"})]}),e.jsxs("div",{className:"eng-field",children:[e.jsx("label",{className:"eng-field-label",children:"Backfill ($/m³)"}),e.jsx("input",{type:"number",className:"prop-input",value:G,onChange:l=>M(l.target.value),min:"0"})]}),e.jsxs("div",{className:"eng-field",children:[e.jsx("label",{className:"eng-field-label",children:"Green Roof ($/m²)"}),e.jsx("input",{type:"number",className:"prop-input",value:T,onChange:l=>L(l.target.value),min:"0"})]}),e.jsxs("div",{className:"eng-field",children:[e.jsx("label",{className:"eng-field-label",children:"Rain Garden ($/m²)"}),e.jsx("input",{type:"number",className:"prop-input",value:F,onChange:l=>q(l.target.value),min:"0"})]}),e.jsxs("div",{className:"eng-field",children:[e.jsx("label",{className:"eng-field-label",children:"Permeable Pave ($/m²)"}),e.jsx("input",{type:"number",className:"prop-input",value:z,onChange:l=>Q(l.target.value),min:"0"})]}),e.jsxs("div",{className:"eng-field",children:[e.jsx("label",{className:"eng-field-label",children:"Bio-swale ($/lm)"}),e.jsx("input",{type:"number",className:"prop-input",value:U,onChange:l=>he(l.target.value),min:"0"})]})]})]}),e.jsxs("div",{className:"precip-section",children:[e.jsx("label",{className:"precip-label",children:"LID Features (Optional)"}),e.jsx("div",{className:"dc-lid-grid",style:{gap:6},children:[{key:"greenRoof",label:"Green Roof",desc:`~${B>0?(B*.5).toFixed(0):0} m²`,val:b,set:d},{key:"rainGarden",label:"Rain Garden",desc:`~${x>0?(x*.05).toFixed(0):0} m²`,val:g,set:D},{key:"permPave",label:"Permeable Pave",desc:`~${x>0?(x*.15).toFixed(0):0} m²`,val:N,set:O},{key:"bioswale",label:"Bio-swale",desc:`~${x>0?(Math.sqrt(x)*.5).toFixed(0):0} m`,val:h,set:E}].map(l=>e.jsxs("button",{className:`dc-lid-btn ${l.val?"dc-lid-on":""}`,onClick:()=>l.set(!l.val),children:[e.jsx("strong",{children:l.label}),e.jsx("span",{style:{fontSize:10,opacity:.7},children:l.desc})]},l.key))})]}),_&&e.jsxs("div",{className:"precip-section",children:[e.jsxs("label",{className:"precip-label",children:["Drainage Design Basis ",e.jsx("span",{style:{fontSize:9,opacity:.5},children:"(approx. IDF)"})]}),e.jsxs("div",{className:"sim-soil-table",children:[e.jsxs("div",{className:"sim-soil-row",children:[e.jsx("span",{children:"Composite C"}),e.jsx("strong",{children:_.C.toFixed(2)})]}),e.jsxs("div",{className:"sim-soil-row",children:[e.jsx("span",{children:"Design Intensity"}),e.jsxs("strong",{children:[_.i.toFixed(1)," mm/hr"]})]}),e.jsxs("div",{className:"sim-soil-row",children:[e.jsx("span",{children:"Peak Discharge (Q)"}),e.jsxs("strong",{children:[(_.Q*1e3).toFixed(1)," L/s"]})]}),e.jsxs("div",{className:"sim-soil-row",children:[e.jsx("span",{children:"Required Pipe"}),e.jsxs("strong",{children:[_.pipe_mm," mm"]})]}),o&&e.jsxs("div",{className:"sim-soil-row",children:[e.jsx("span",{children:"Trench Depth (2.4m min cover)"}),e.jsxs("strong",{children:[o.excavation.depth.toFixed(2)," m"]})]}),o&&e.jsxs("div",{className:"sim-soil-row",children:[e.jsx("span",{children:"Trench Width"}),e.jsxs("strong",{children:[o.excavation.width.toFixed(2)," m"]})]})]})]})]}),e.jsxs("div",{className:"precip-section precip-footer-section",children:[e.jsxs("p",{className:"precip-hint",style:{fontSize:11},children:[e.jsx("strong",{children:"Real data:"})," Property & stormwater facilities — Edmonton Open Data API. Engineering formulas (Rational Method, Manning's) are standard methods.",e.jsx("br",{}),e.jsx("strong",{children:"User-provided:"})," All unit costs are editable — no verified public source exists for Alberta infrastructure unit rates. Pipe catalogue rates are defaults only.",e.jsx("br",{}),e.jsx("strong",{children:"Approximate:"})," IDF intensities for Edmonton. Impervious ratios from zoning."]}),e.jsx("p",{className:"footer-credit",children:"HackED 2026 - University of Alberta"})]})]}),e.jsx("div",{className:"precip-main theme-dark",children:e.jsxs("div",{className:"sim-split-main",children:[e.jsx(wa,{handleMapClick:a.handleMapClick,markerPos:a.markerPos,visibleMarkers:a.visibleMarkers,selected:a.selected,setSelected:a.setSelected,setClickMarker:a.setClickMarker,clickMarker:a.clickMarker,clickLoading:a.clickLoading,mode:a.mode,compact:!0}),o?e.jsxs("div",{className:"sim-charts-area",children:[e.jsxs("div",{className:"sim-chart-card",children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs("h4",{children:["Cost Estimate Summary ",e.jsx("span",{style:{fontSize:10,opacity:.5,fontWeight:400},children:"(based on user-provided unit rates)"})]}),e.jsxs("button",{className:"export-btn",onClick:()=>Ca(ke.map(l=>({Item:l.name,Cost:l.cost})),"cost_analysis.csv"),children:[e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{d:"M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M7 10l5 5 5-5M12 15V3"})}),"CSV"]})]}),e.jsxs("div",{className:"cost-summary-grid",children:[e.jsxs("div",{className:"cost-summary-item cost-total",children:[e.jsx("span",{className:"cost-summary-label",children:"Total Project Estimate"}),e.jsx("span",{className:"cost-summary-value",children:u(o.grandTotal)})]}),e.jsxs("div",{className:"cost-summary-item",children:[e.jsx("span",{className:"cost-summary-label",children:"Storm Infrastructure"}),e.jsx("span",{className:"cost-summary-value",children:u(o.infraTotal)})]}),e.jsxs("div",{className:"cost-summary-item",children:[e.jsx("span",{className:"cost-summary-label",children:"LID Features"}),e.jsx("span",{className:"cost-summary-value",children:u(o.lidTotal)})]}),e.jsxs("div",{className:"cost-summary-item",children:[e.jsx("span",{className:"cost-summary-label",children:"Engineering (15%)"}),e.jsx("span",{className:"cost-summary-value",children:u(o.engineering)})]}),e.jsxs("div",{className:"cost-summary-item",children:[e.jsx("span",{className:"cost-summary-label",children:"Contingency (10%)"}),e.jsx("span",{className:"cost-summary-value",children:u(o.contingency)})]})]})]}),e.jsxs("div",{className:"sim-chart-card",children:[e.jsx("h4",{children:"Detailed Cost Breakdown"}),e.jsxs("table",{className:"cost-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Item"}),e.jsx("th",{children:"Description"}),e.jsx("th",{children:"Qty"}),e.jsx("th",{children:"Unit Cost"}),e.jsx("th",{children:"Total"})]})}),e.jsxs("tbody",{children:[e.jsx("tr",{className:"cost-row-header",children:e.jsx("td",{colSpan:5,children:"Storm Pipe Infrastructure"})}),e.jsxs("tr",{children:[e.jsx("td",{children:"Storm Pipe"}),e.jsxs("td",{children:[o.pipe.dia," mm ",Sr[o.pipe.material]]}),e.jsxs("td",{children:[o.pipe.length," m"]}),e.jsxs("td",{children:[u(o.pipe.unitCost),"/m"]}),e.jsx("td",{children:u(o.pipe.cost)})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"Catch Basins"}),e.jsx("td",{children:"Standard CB w/ grate"}),e.jsxs("td",{children:[o.catchBasins.count," ea"]}),e.jsxs("td",{children:[u(o.catchBasins.unitCost),"/ea"]}),e.jsx("td",{children:u(o.catchBasins.cost)})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"Manholes"}),e.jsx("td",{children:"Standard MH"}),e.jsxs("td",{children:[o.manholes.count," ea"]}),e.jsxs("td",{children:[u(o.manholes.unitCost),"/ea"]}),e.jsx("td",{children:u(o.manholes.cost)})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"Excavation"}),e.jsxs("td",{children:["Trench ",o.excavation.depth.toFixed(1),"m deep × ",o.excavation.width.toFixed(2),"m wide"]}),e.jsxs("td",{children:[o.excavation.vol.toFixed(1)," m³"]}),e.jsxs("td",{children:[u(ge),"/m³"]}),e.jsx("td",{children:u(o.excavation.cost)})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"Backfill"}),e.jsx("td",{children:"Granular bedding & backfill"}),e.jsxs("td",{children:[o.backfill.vol.toFixed(1)," m³"]}),e.jsxs("td",{children:[u(xe),"/m³"]}),e.jsx("td",{children:u(o.backfill.cost)})]}),o.lidTotal>0&&e.jsxs(e.Fragment,{children:[e.jsx("tr",{className:"cost-row-header",children:e.jsx("td",{colSpan:5,children:"Low Impact Development (LID)"})}),o.lid.greenRoof.cost>0&&e.jsxs("tr",{children:[e.jsx("td",{children:"Green Roof"}),e.jsx("td",{children:"Extensive sedum system"}),e.jsxs("td",{children:[o.lid.greenRoof.area.toFixed(0)," m²"]}),e.jsxs("td",{children:[u(je),"/m²"]}),e.jsx("td",{children:u(o.lid.greenRoof.cost)})]}),o.lid.rainGarden.cost>0&&e.jsxs("tr",{children:[e.jsx("td",{children:"Rain Garden"}),e.jsx("td",{children:"Bioretention cell"}),e.jsxs("td",{children:[o.lid.rainGarden.area.toFixed(0)," m²"]}),e.jsxs("td",{children:[u(be),"/m²"]}),e.jsx("td",{children:u(o.lid.rainGarden.cost)})]}),o.lid.permPave.cost>0&&e.jsxs("tr",{children:[e.jsx("td",{children:"Permeable Pavement"}),e.jsx("td",{children:"Interlocking concrete pavers"}),e.jsxs("td",{children:[o.lid.permPave.area.toFixed(0)," m²"]}),e.jsxs("td",{children:[u(ye),"/m²"]}),e.jsx("td",{children:u(o.lid.permPave.cost)})]}),o.lid.bioswale.cost>0&&e.jsxs("tr",{children:[e.jsx("td",{children:"Bio-swale"}),e.jsx("td",{children:"Vegetated channel"}),e.jsxs("td",{children:[o.lid.bioswale.len.toFixed(0)," m"]}),e.jsxs("td",{children:[u(Pe),"/m"]}),e.jsx("td",{children:u(o.lid.bioswale.cost)})]})]}),e.jsx("tr",{className:"cost-row-header",children:e.jsx("td",{colSpan:5,children:"Professional Services & Contingency"})}),e.jsxs("tr",{children:[e.jsx("td",{children:"Engineering"}),e.jsx("td",{children:"Design, permitting, inspection"}),e.jsx("td",{children:"15%"}),e.jsx("td",{children:"-"}),e.jsx("td",{children:u(o.engineering)})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"Contingency"}),e.jsx("td",{children:"Unforeseen conditions"}),e.jsx("td",{children:"10%"}),e.jsx("td",{children:"-"}),e.jsx("td",{children:u(o.contingency)})]}),e.jsxs("tr",{className:"cost-row-total",children:[e.jsx("td",{colSpan:4,children:"GRAND TOTAL"}),e.jsx("td",{children:u(o.grandTotal)})]})]})]})]}),e.jsxs("div",{className:"sim-chart-card",children:[e.jsx("h4",{children:"Cost Breakdown by Item"}),e.jsx(aa,{width:"100%",height:220,children:e.jsxs(Nt,{data:ke,layout:"vertical",margin:{left:100},children:[e.jsx(Ct,{strokeDasharray:"3 3",stroke:"rgba(57,211,83,0.12)"}),e.jsx(St,{type:"number",stroke:"rgba(57,211,83,0.4)",tick:{fontSize:9,fill:"rgba(57,211,83,0.5)"},tickFormatter:l=>`$${(l/1e3).toFixed(0)}k`}),e.jsx(Et,{dataKey:"name",type:"category",stroke:"rgba(57,211,83,0.4)",tick:{fontSize:10,fill:"rgba(57,211,83,0.6)"},width:95}),e.jsx(ta,{contentStyle:Le,formatter:l=>[u(l??0)]}),e.jsx(wt,{dataKey:"cost",fill:"#39d353",radius:[0,3,3,0]})]})})]}),e.jsxs("div",{className:"sim-chart-card",children:[e.jsx("h4",{children:"Cost Distribution"}),e.jsx(aa,{width:"100%",height:200,children:e.jsxs(Cr,{children:[e.jsx(ya,{data:Te,cx:"50%",cy:"50%",outerRadius:70,dataKey:"value",label:({name:l,percent:w})=>`${l??""} (${((w??0)*100).toFixed(0)}%)`,children:Te.map((l,w)=>e.jsx(Oe,{fill:_e[w%_e.length]},w))}),e.jsx(ta,{contentStyle:Le,formatter:l=>[u(l??0)]}),e.jsx(It,{wrapperStyle:{fontSize:10}})]})})]}),e.jsxs("div",{className:"sim-chart-card",children:[e.jsx("h4",{children:"Pipe Cost Reference (Installed, CAD/m)"}),e.jsxs("table",{className:"cost-table cost-ref-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Diameter (mm)"}),e.jsx("th",{children:"PVC"}),e.jsx("th",{children:"HDPE"}),e.jsx("th",{children:"Concrete"})]})}),e.jsx("tbody",{children:ca.map(l=>e.jsxs("tr",{className:_&&l.dia_mm===_.pipe_mm?"cost-row-active":"",children:[e.jsx("td",{children:l.dia_mm}),e.jsx("td",{children:l.pvc>0?u(l.pvc):"-"}),e.jsx("td",{children:l.hdpe>0?u(l.hdpe):"-"}),e.jsx("td",{children:l.concrete>0?u(l.concrete):"-"})]},l.dia_mm))})]}),e.jsxs("p",{className:"dc-note",style:{marginTop:8},children:["Highlighted row: required pipe size based on ",t,"-year design storm.",e.jsx("strong",{children:"Pipe catalogue rates are defaults"})," — no verified public source. Edit unit rates in the sidebar to use your own data."]})]})]}):e.jsx("div",{className:"precip-overlay-loading",style:{flex:1},children:"Search or enter a property to calculate costs"})]})})]})}export{Fr as default};
